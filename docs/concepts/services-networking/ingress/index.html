<!DOCTYPE html>
<html id="docs" lang="en" class="">
<head>
  

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-36037335-10"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-36037335-10');
</script>
<meta charset="utf-8">
<title>Ingress - SuperMap iDesktop .NET</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" type="image/png" href="/images/favicon.png">
<link rel="stylesheet" href="/css/base_fonts.css">
<link rel="stylesheet" href="/css/styles.css">
<link rel="stylesheet" href="/css/jquery-ui.min.css">
<link rel="stylesheet" href="/css/sweetalert.min.css">
<link rel="stylesheet" href="/css/callouts.css">
<link rel="stylesheet" href="/css/custom-jekyll/tags.css">
<link rel="stylesheet" href="https://qinlj.github.io/css/main.css" />
<link rel="stylesheet" href="https://qinlj.github.io/css/share.min.css" />



<meta name="description" content="">
<meta property="og:description" content="">
<meta name="twitter:description" content="">
<meta property="og:url" content="https://qinlj.github.io/docs/concepts/services-networking/ingress/">
<meta property="og:title" content="Ingress">
<meta name="twitter:title" content="Ingress">

<meta name="twitter:image:alt"   content="SuperMap iDesktop .NET">

<meta property="og:image" content="/images/kubernetes-horizontal-color.png">

<meta property="og:type" content="article">
<script src="/js/anchor-4.1.1.min.js"></script>
<script src="/js/jquery-3.2.1.min.js"></script>
<script src="/js/jquery-ui-1.12.1.min.js"></script>
<script src="/js/bootstrap-3.3.7.min.js"></script>
<script src="/js/sweetalert-1.1.3.min.js"></script>
<script src="/js/script.js"></script>
<script src="/js/custom-jekyll/tags.js"></script>


</head>
<body>
<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/" class="logo"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            
            
            <li><a href="/docs/" class="active">Documentation</a></li>
            
            <li><a href="/blog/">Blog</a></li>
            
            <li><a href="/partners/">Partners</a></li>
            
            <li><a href="/community/">Community</a></li>
            
            <li><a href="/case-studies/">Case Studies</a></li>
            
            
            
             <li>
                <a href="#">
                    English <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="/zh/">中文 Chinese</a></li>
                
                    <li><a href="/ko/">한국어 Korean</a></li>
                
                    <li><a href="/ja/">日本語 Japanese</a></li>
                
                    <li><a href="/fr/">Français</a></li>
                
                    <li><a href="/it/">Italian</a></li>
                
                </ul>
            </li>

            <li>
                <a href="#">
                    v1.13 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="https://kubernetes.io">v1.13</a></li>
                
                    <li><a href="https://supermaphehh.github.io/zh/">iDesktop .NET</a></li>
                
                    <li><a href="https://v1-12.docs.kubernetes.io">v1.12</a></li>
                
                    <li><a href="https://v1-11.docs.kubernetes.io">v1.11</a></li>
                
                    <li><a href="https://v1-10.docs.kubernetes.io">v1.10</a></li>
                
                    <li><a href="https://v1-9.docs.kubernetes.io">v1.9</a></li>
                
                </ul>
            </li>
        </ul>

        <form id="searchBox" action="/search/">
          <input type="text" id="search" name="q" placeholder="Search" aria-label="Search">
        </form>

    </div>

    <nav id="mainNav">
        <main data-auto-burger="primary">
         
           <div class="nav-box">
            <h3><a href="/docs/tutorials/hello-minikube/">Get Started</a></h3>
           <p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>

        </div>
         
           <div class="nav-box">
            <h3><a href="/docs/home/">Documentation</a></h3>
           <p>Learn how to use Kubernetes with conceptual, tutorial, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>

        </div>
         
           <div class="nav-box">
            <h3><a href="/blog/">Blog</a></h3>
           <p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>

        </div>
         
        </main>
        <main data-auto-burger="primary">
        <div class="left">
            <h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
            <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
        </div>

        <div class="right">
            <h5 class="github-invite">Explore the community</h5>
            <div class="social">
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack Slack</span></a>
                <a href="https://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://discuss.kubernetes.io" class="mailing-list"><span>Forum</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
        </div>
        <div class="clear" style="clear: both"></div>
        </main>
    </nav>
</header>



<section id="hero" class="light-text no-sub">
  











<h1>Concepts</h1>
<h5></h5>










<div id="vendorStrip" class="light-text">
	<ul>
		
		
		<li><a href="/docs/home/">HOME</a></li>
		
		
		<li><a href="/docs/surfaceanalyst/">SURFACEANALYSIS</a></li>
		
		
		<li><a href="/docs/setup/">SETUP</a></li>
		
		
		<li><a href="/docs/concepts/" class="YAH">CONCEPTS</a></li>
		
		
		<li><a href="/docs/tasks/">TASKS</a></li>
		
		
		<li><a href="/docs/tutorials/">TUTORIALS</a></li>
		
		
		<li><a href="/docs/reference/">REFERENCE</a></li>
		
		
		<li><a href="/docs/contribute/">CONTRIBUTE</a></li>
		
	</ul>
	<form id="searchBox" action="/docs/search/">
		<input type="text" id="search" name="q" placeholder="Search" aria-label="Search">
  </form>
</div>

</section>



<section id="encyclopedia">
  
<div id="docsToc">
     <div class="pi-accordion">
    	
        
        
        
        
        
         
             
                 
             
         
             
                 
             
         
             
                 
             
         
             
                 
                          
                          
                 
             
         
             
         
             
         
             
         
             
         
             
         
         
        
        <a class="item" data-title="Concepts" href="/docs/concepts/"></a>

	
	
	
	
		
			
<div class="item" data-title="Overview">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="What is Kubernetes?" href="/docs/concepts/overview/what-is-kubernetes/"></a>

		
	
		
			

<a class="item" data-title="Kubernetes Components" href="/docs/concepts/overview/components/"></a>

		
	
		
			

<a class="item" data-title="The Kubernetes API" href="/docs/concepts/overview/kubernetes-api/"></a>

		
	
		
			
<div class="item" data-title="Working with Kubernetes Objects">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Understanding Kubernetes Objects" href="/docs/concepts/overview/working-with-objects/kubernetes-objects/"></a>

		
	
		
			

<a class="item" data-title="Names" href="/docs/concepts/overview/working-with-objects/names/"></a>

		
	
		
			

<a class="item" data-title="Namespaces" href="/docs/concepts/overview/working-with-objects/namespaces/"></a>

		
	
		
			

<a class="item" data-title="Labels and Selectors" href="/docs/concepts/overview/working-with-objects/labels/"></a>

		
	
		
			

<a class="item" data-title="Annotations" href="/docs/concepts/overview/working-with-objects/annotations/"></a>

		
	
		
			

<a class="item" data-title="Field Selectors" href="/docs/concepts/overview/working-with-objects/field-selectors/"></a>

		
	
		
			

<a class="item" data-title="Recommended Labels" href="/docs/concepts/overview/working-with-objects/common-labels/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Object Management Using kubectl">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Kubernetes Object Management" href="/docs/concepts/overview/object-management-kubectl/overview/"></a>

		
	
		
			

<a class="item" data-title="Managing Kubernetes Objects Using Imperative Commands" href="/docs/concepts/overview/object-management-kubectl/imperative-command/"></a>

		
	
		
			

<a class="item" data-title="Imperative Management of Kubernetes Objects Using Configuration Files" href="/docs/concepts/overview/object-management-kubectl/imperative-config/"></a>

		
	
		
			

<a class="item" data-title="Declarative Management of Kubernetes Objects Using Configuration Files" href="/docs/concepts/overview/object-management-kubectl/declarative-config/"></a>

		
	

	</div>
</div>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Kubernetes Architecture">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Nodes" href="/docs/concepts/architecture/nodes/"></a>

		
	
		
			

<a class="item" data-title="Master-Node communication" href="/docs/concepts/architecture/master-node-communication/"></a>

		
	
		
			

<a class="item" data-title="Concepts Underlying the Cloud Controller Manager" href="/docs/concepts/architecture/cloud-controller/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Containers">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Images" href="/docs/concepts/containers/images/"></a>

		
	
		
			

<a class="item" data-title="Container Environment Variables" href="/docs/concepts/containers/container-environment-variables/"></a>

		
	
		
			

<a class="item" data-title="Runtime Class" href="/docs/concepts/containers/runtime-class/"></a>

		
	
		
			

<a class="item" data-title="Container Lifecycle Hooks" href="/docs/concepts/containers/container-lifecycle-hooks/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Workloads">
	<div class="container">
		
		
	
	
	
	
		
			
<div class="item" data-title="Pods">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Pod Overview" href="/docs/concepts/workloads/pods/pod-overview/"></a>

		
	
		
			

<a class="item" data-title="Pods" href="/docs/concepts/workloads/pods/pod/"></a>

		
	
		
			

<a class="item" data-title="Pod Lifecycle" href="/docs/concepts/workloads/pods/pod-lifecycle/"></a>

		
	
		
			

<a class="item" data-title="Init Containers" href="/docs/concepts/workloads/pods/init-containers/"></a>

		
	
		
			

<a class="item" data-title="Pod Preset" href="/docs/concepts/workloads/pods/podpreset/"></a>

		
	
		
			

<a class="item" data-title="Disruptions" href="/docs/concepts/workloads/pods/disruptions/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Controllers">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="ReplicaSet" href="/docs/concepts/workloads/controllers/replicaset/"></a>

		
	
		
			

<a class="item" data-title="ReplicationController" href="/docs/concepts/workloads/controllers/replicationcontroller/"></a>

		
	
		
			

<a class="item" data-title="Deployments" href="/docs/concepts/workloads/controllers/deployment/"></a>

		
	
		
			

<a class="item" data-title="StatefulSets" href="/docs/concepts/workloads/controllers/statefulset/"></a>

		
	
		
			

<a class="item" data-title="DaemonSet" href="/docs/concepts/workloads/controllers/daemonset/"></a>

		
	
		
			

<a class="item" data-title="Garbage Collection" href="/docs/concepts/workloads/controllers/garbage-collection/"></a>

		
	
		
			

<a class="item" data-title="TTL Controller for Finished Resources" href="/docs/concepts/workloads/controllers/ttlafterfinished/"></a>

		
	
		
			

<a class="item" data-title="Jobs - Run to Completion" href="/docs/concepts/workloads/controllers/jobs-run-to-completion/"></a>

		
	
		
			

<a class="item" data-title="CronJob" href="/docs/concepts/workloads/controllers/cron-jobs/"></a>

		
	

	</div>
</div>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Services, Load Balancing, and Networking">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Services" href="/docs/concepts/services-networking/service/"></a>

		
	
		
			

<a class="item" data-title="DNS for Services and Pods" href="/docs/concepts/services-networking/dns-pod-service/"></a>

		
	
		
			

<a class="item" data-title="Connecting Applications with Services" href="/docs/concepts/services-networking/connect-applications-service/"></a>

		
	
		
			

<a class="item" data-title="Ingress" href="/docs/concepts/services-networking/ingress/"></a>

		
	
		
			

<a class="item" data-title="Ingress Controllers" href="/docs/concepts/services-networking/ingress-controllers/"></a>

		
	
		
			

<a class="item" data-title="Network Policies" href="/docs/concepts/services-networking/network-policies/"></a>

		
	
		
			

<a class="item" data-title="Adding entries to Pod /etc/hosts with HostAliases" href="/docs/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Storage">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Volumes" href="/docs/concepts/storage/volumes/"></a>

		
	
		
			

<a class="item" data-title="Persistent Volumes" href="/docs/concepts/storage/persistent-volumes/"></a>

		
	
		
			

<a class="item" data-title="Volume Snapshots" href="/docs/concepts/storage/volume-snapshots/"></a>

		
	
		
			

<a class="item" data-title="Storage Classes" href="/docs/concepts/storage/storage-classes/"></a>

		
	
		
			

<a class="item" data-title="Volume Snapshot Classes" href="/docs/concepts/storage/volume-snapshot-classes/"></a>

		
	
		
			

<a class="item" data-title="Dynamic Volume Provisioning" href="/docs/concepts/storage/dynamic-provisioning/"></a>

		
	
		
			

<a class="item" data-title="Node-specific Volume Limits" href="/docs/concepts/storage/storage-limits/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Configuration">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Configuration Best Practices" href="/docs/concepts/configuration/overview/"></a>

		
	
		
			

<a class="item" data-title="Managing Compute Resources for Containers" href="/docs/concepts/configuration/manage-compute-resources-container/"></a>

		
	
		
			

<a class="item" data-title="Assigning Pods to Nodes" href="/docs/concepts/configuration/assign-pod-node/"></a>

		
	
		
			

<a class="item" data-title="Taints and Tolerations" href="/docs/concepts/configuration/taint-and-toleration/"></a>

		
	
		
			

<a class="item" data-title="Secrets" href="/docs/concepts/configuration/secret/"></a>

		
	
		
			

<a class="item" data-title="Organizing Cluster Access Using kubeconfig Files" href="/docs/concepts/configuration/organize-cluster-access-kubeconfig/"></a>

		
	
		
			

<a class="item" data-title="Pod Priority and Preemption" href="/docs/concepts/configuration/pod-priority-preemption/"></a>

		
	
		
			

<a class="item" data-title="Scheduler Performance Tuning" href="/docs/concepts/configuration/scheduler-perf-tuning/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Policies">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Resource Quotas" href="/docs/concepts/policy/resource-quotas/"></a>

		
	
		
			

<a class="item" data-title="Pod Security Policies" href="/docs/concepts/policy/pod-security-policy/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Cluster Administration">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Cluster Administration Overview" href="/docs/concepts/cluster-administration/cluster-administration-overview/"></a>

		
	
		
			

<a class="item" data-title="Certificates" href="/docs/concepts/cluster-administration/certificates/"></a>

		
	
		
			

<a class="item" data-title="Cloud Providers" href="/docs/concepts/cluster-administration/cloud-providers/"></a>

		
	
		
			

<a class="item" data-title="Managing Resources" href="/docs/concepts/cluster-administration/manage-deployment/"></a>

		
	
		
			

<a class="item" data-title="Cluster Networking" href="/docs/concepts/cluster-administration/networking/"></a>

		
	
		
			

<a class="item" data-title="Logging Architecture" href="/docs/concepts/cluster-administration/logging/"></a>

		
	
		
			

<a class="item" data-title="Configuring kubelet Garbage Collection" href="/docs/concepts/cluster-administration/kubelet-garbage-collection/"></a>

		
	
		
			

<a class="item" data-title="Federation" href="/docs/concepts/cluster-administration/federation/"></a>

		
	
		
			

<a class="item" data-title="Proxies in Kubernetes" href="/docs/concepts/cluster-administration/proxies/"></a>

		
	
		
			

<a class="item" data-title="Controller manager metrics" href="/docs/concepts/cluster-administration/controller-metrics/"></a>

		
	
		
			

<a class="item" data-title="Installing Addons" href="/docs/concepts/cluster-administration/addons/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Extending Kubernetes">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Extending your Kubernetes Cluster" href="/docs/concepts/extend-kubernetes/extend-cluster/"></a>

		
	
		
			
<div class="item" data-title="Extending the Kubernetes API">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Extending the Kubernetes API with the aggregation layer" href="/docs/concepts/extend-kubernetes/api-extension/apiserver-aggregation/"></a>

		
	
		
			

<a class="item" data-title="Custom Resources" href="/docs/concepts/extend-kubernetes/api-extension/custom-resources/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Compute, Storage, and Networking Extensions">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Network Plugins" href="/docs/concepts/extend-kubernetes/compute-storage-net/network-plugins/"></a>

		
	
		
			

<a class="item" data-title="Device Plugins" href="/docs/concepts/extend-kubernetes/compute-storage-net/device-plugins/"></a>

		
	

	</div>
</div>

		
	
		
			

<a class="item" data-title="Service Catalog" href="/docs/concepts/extend-kubernetes/service-catalog/"></a>

		
	
		
			

<a class="item" data-title="Poseidon-Firmament - An alternate scheduler" href="/docs/concepts/extend-kubernetes/poseidon-firmament-alternate-scheduler/"></a>

		
	

	</div>
</div>

		
	





     </div> 
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
</div> 


  <div id="docsContent">
  

<p>
  <a href="https://github.com/kubernetes/website/edit/master/content/en/docs%5cconcepts%5cservices-networking%5cingress.md" id="editPageButton" target="_blank">
    Edit This Page
  </a>
</p>

<h1>Ingress</h1>



<p>An API object that manages external access to the services in a cluster, typically HTTP.</p>

<p>Ingress can provide load balancing, SSL termination and name-based virtual hosting.</p>









<ul id="markdown-toc">










<li><a href="#terminology">Terminology</a></li>




<li><a href="#what-is-ingress">What is Ingress?</a></li>




<li><a href="#prerequisites">Prerequisites</a></li>




<li><a href="#the-ingress-resource">The Ingress Resource</a></li>




<li><a href="#types-of-ingress">Types of Ingress</a></li>




<li><a href="#updating-an-ingress">Updating an Ingress</a></li>




<li><a href="#failing-across-availability-zones">Failing across availability zones</a></li>




<li><a href="#future-work">Future Work</a></li>




<li><a href="#alternatives">Alternatives</a></li>




















<li><a href="#what-s-next">What's next</a></li>



</ul>


<h2 id="terminology">Terminology</h2>

<p>For the sake of clarity, this guide defines the following terms:</p>

<ul>
<li>Node: A single virtual or physical machine in a Kubernetes cluster.</li>
<li>Cluster: A group of nodes firewalled from the internet, that are the primary compute resources managed by Kubernetes.</li>
<li>Edge router: A router that enforces the firewall policy for your cluster. This could be a gateway managed by a cloud provider or a physical piece of hardware.</li>
<li>Cluster network: A set of links, logical or physical, that facilitate communication within a cluster according to the <a href="/docs/concepts/cluster-administration/networking/">Kubernetes networking model</a>.</li>
<li>Service: A Kubernetes <a href="/docs/concepts/services-networking/service/">Service</a> that identifies a set of pods using label selectors. Unless mentioned otherwise, Services are assumed to have virtual IPs only routable within the cluster network.</li>
</ul>

<h2 id="what-is-ingress">What is Ingress?</h2>

<p>Ingress, added in Kubernetes v1.1, exposes HTTP and HTTPS routes from outside the cluster to
<a href="/docs/concepts/services-networking/service/" target="_blank">services</a> within the cluster.
Traffic routing is controlled by rules defined on the Ingress resource.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-none" data-lang="none">    internet
        |
   [ Ingress ]
   --|-----|--
   [ Services ]</code></pre></div>
<p>An Ingress can be configured to give services externally-reachable URLs, load balance traffic, terminate SSL, and offer name based virtual hosting. An <a href="/docs/concepts/services-networking/ingress-controllers">Ingress controller</a> is responsible for fulfilling the Ingress, usually with a loadbalancer, though it may also configure your edge router or additional frontends to help handle the traffic.</p>

<p>An Ingress does not expose arbitrary ports or protocols. Exposing services other than HTTP and HTTPS to the internet typically
uses a service of type <a href="/docs/concepts/services-networking/service/#nodeport">Service.Type=NodePort</a> or
<a href="/docs/concepts/services-networking/service/#loadbalancer">Service.Type=LoadBalancer</a>.</p>

<h2 id="prerequisites">Prerequisites</h2>

<div style="margin-top: 10px; margin-bottom: 10px;">



<b>FEATURE STATE:</b> <code>Kubernetes v1.1</code>




    
    
    
    
    
<a href="#" id="feature-state-dialog-link" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-newwin"></span>beta</a>
<div id="feature-state-dialog" class="ui-dialog-content" title="beta">
This feature is currently in a <em>beta</em> state, meaning:</p>

<ul>
<li>The version names contain beta (e.g. v2beta3).</li>
<li>Code is well tested. Enabling the feature is considered safe. Enabled by default.</li>
<li>Support for the overall feature will not be dropped, though details may change.</li>
<li>The schema and/or semantics of objects may change in incompatible ways in a subsequent beta or stable release. When this happens, we will provide instructions for migrating to the next version. This may require deleting, editing, and re-creating API objects. The editing process may require some thought. This may require downtime for applications that rely on the feature.</li>
<li>Recommended for only non-business-critical uses because of potential for incompatible changes in subsequent releases. If you have multiple clusters that can be upgraded independently, you may be able to relax this restriction.</li>
<li><strong>Please do try our beta features and give feedback on them! After they exit beta, it may not be practical for us to make more changes.</strong></li>
</ul>

</div>
<script>
$(function(){
    
    $( "#feature-state-dialog" ).dialog({
        autoOpen: false,
        width: "600",
        buttons: [
            {
                text: "Ok",
                click: function() {
                    $( this ).dialog( "close" );
                }
            }
        ]
    });

    
    $( "#feature-state-dialog-link" ).click(function( event ) {
        $( "#feature-state-dialog" ).dialog( "open" );
        event.preventDefault();
    });

});
</script>

    

</div>

<p>Before you start using an Ingress, there are a few things you should understand. The Ingress is a beta resource.</p>

<blockquote class="note">
  <div><strong>Note:</strong> You must have an <a href="/docs/concepts/services-networking/ingress-controllers">Ingress controller</a> to satisfy an Ingress. Only creating an Ingress resource has no effect.</div>
</blockquote>

<p>GCE/Google Kubernetes Engine deploys an Ingress controller on the master. Review the
<a href="https://github.com/kubernetes/ingress-gce/blob/master/BETA_LIMITATIONS.md#glbc-beta-limitations" target="_blank">beta limitations</a>
of this controller if you are using GCE/GKE.</p>

<p>In environments other than GCE/Google Kubernetes Engine, you may need to
<a href="https://kubernetes.github.io/ingress-nginx/deploy/" target="_blank">deploy an ingress controller</a>. There are a number of
<a href="/docs/concepts/services-networking/ingress-controllers">ingress controllers</a> you may choose from.</p>

<h3 id="before-you-begin">Before you begin</h3>

<p>Ideally, all ingress controllers should fulfill this specification, but the various ingress
controllers operate slightly differently.</p>

<blockquote class="note">
  <div><strong>Note:</strong> Make sure you review your ingress controller&rsquo;s documentation to understand the caveats of choosing it.</div>
</blockquote>

<h2 id="the-ingress-resource">The Ingress Resource</h2>

<p>A minimal ingress resource example:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">apiVersion:<span style="color:#bbb"> </span>extensions/v1beta1<span style="color:#bbb">
</span><span style="color:#bbb"></span>kind:<span style="color:#bbb"> </span>Ingress<span style="color:#bbb">
</span><span style="color:#bbb"></span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>name:<span style="color:#bbb"> </span>test-ingress<span style="color:#bbb">
</span><span style="color:#bbb">  </span>annotations:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>nginx.ingress.kubernetes.io/rewrite-target:<span style="color:#bbb"> </span>/<span style="color:#bbb">
</span><span style="color:#bbb"></span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>rules:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>http:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>paths:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>-<span style="color:#bbb"> </span>path:<span style="color:#bbb"> </span>/testpath<span style="color:#bbb">
</span><span style="color:#bbb">        </span>backend:<span style="color:#bbb">
</span><span style="color:#bbb">          </span>serviceName:<span style="color:#bbb"> </span>test<span style="color:#bbb">
</span><span style="color:#bbb">          </span>servicePort:<span style="color:#bbb"> </span><span style="color:#666">80</span></code></pre></div>
<p>As with all other Kubernetes resources, an Ingress needs <code>apiVersion</code>, <code>kind</code>, and <code>metadata</code> fields.<br />
 For general information about working with config files, see <a href="/docs/tasks/run-application/run-stateless-application-deployment/">deploying applications</a>, <a href="/docs/tasks/configure-pod-container/configure-pod-configmap/">configuring containers</a>, <a href="/docs/concepts/cluster-administration/manage-deployment/">managing resources</a>.
 Ingress frequently uses annotations to configure some options depending on the Ingress controller, an example of which
 is the <a href="https://github.com/kubernetes/ingress-nginx/blob/master/docs/examples/rewrite/README.md" target="_blank">rewrite-target annotation</a>.
 Different <a href="/docs/concepts/services-networking/ingress-controllers">Ingress controller</a> support different annotations. Review the documentation for
 your choice of Ingress controller to learn which annotations are supported.</p>

<p>The Ingress <a href="https://git.k8s.io/community/contributors/devel/api-conventions.md#spec-and-status" target="_blank">spec</a>
has all the information needed to configure a loadbalancer or proxy server. Most importantly, it
contains a list of rules matched against all incoming requests. Ingress resource only supports rules
for directing HTTP traffic.</p>

<h3 id="ingress-rules">Ingress rules</h3>

<p>Each http rule contains the following information:</p>

<ul>
<li>An optional host. In this example, no host is specified, so the rule applies to all inbound
HTTP traffic through the IP address is specified. If a host is provided (for example,
foo.bar.com), the rules apply to that host.</li>
<li>a list of paths (for example, /testpath), each of which has an associated backend defined with a <code>serviceName</code>
and <code>servicePort</code>. Both the host and path must match the content of an incoming request before the
loadbalancer will direct traffic to the referenced service.</li>
<li>A backend is a combination of service and port names as described in the
<a href="/docs/concepts/services-networking/service/">services doc</a>. HTTP (and HTTPS) requests to the
Ingress matching the host and path of the rule will be sent to the listed backend.</li>
</ul>

<p>A default backend is often configured in an Ingress controller that will service any requests that do not
match a path in the spec.</p>

<h3 id="default-backend">Default Backend</h3>

<p>An Ingress with no rules sends all traffic to a single default backend. The default
backend is typically a configuration option of the <a href="/docs/concepts/services-networking/ingress-controllers">Ingress controller</a> and is not specified in your Ingress resources.</p>

<p>If none of the hosts or paths match the HTTP request in the Ingress objects, the traffic is
routed to your default backend.</p>

<h2 id="types-of-ingress">Types of Ingress</h2>

<h3 id="single-service-ingress">Single Service Ingress</h3>

<p>There are existing Kubernetes concepts that allow you to expose a single Service
(see <a href="#alternatives">alternatives</a>). You can also do this with an Ingress by specifying a
<em>default backend</em> with no rules.</p>

<table class="includecode" id="service-networking-ingress-yaml">
    <thead>
        <tr>
            <th>
                <a href="https://raw.githubusercontent.com/kubernetes/website/master/content/en/examples/service/networking/ingress.yaml" download="service/networking/ingress.yaml">
                    <code>service/networking/ingress.yaml</code>
                </a>
                <img src="/images/copycode.svg" style="max-height:24px" onclick="copyCode('service-networking-ingress-yaml')" title="Copy service/networking/ingress.yaml to clipboard">
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">apiVersion:<span style="color:#bbb"> </span>extensions/v1beta1<span style="color:#bbb">
</span><span style="color:#bbb"></span>kind:<span style="color:#bbb"> </span>Ingress<span style="color:#bbb">
</span><span style="color:#bbb"></span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>name:<span style="color:#bbb"> </span>test-ingress<span style="color:#bbb">
</span><span style="color:#bbb"></span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>backend:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>serviceName:<span style="color:#bbb"> </span>testsvc<span style="color:#bbb">
</span><span style="color:#bbb">    </span>servicePort:<span style="color:#bbb"> </span><span style="color:#666">80</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span></code></pre></div>  </td>
        </tr>
    </tbody>
</table>

<p>If you create it using <code>kubectl create -f</code> you should see:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get ingress test-ingress</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">NAME           HOSTS     ADDRESS           PORTS     AGE
test-ingress   *         <span style="color:#666">107</span>.178.254.228   <span style="color:#666">80</span>        59s</code></pre></div>
<p>Where <code>107.178.254.228</code> is the IP allocated by the Ingress controller to satisfy
this Ingress.</p>

<blockquote class="note">
  <div><strong>Note:</strong> Ingress controllers and load balancers may take a minute or two to allocate an IP address.
Until that time you will often see the address listed as <code>&lt;pending&gt;</code>.</div>
</blockquote>

<h3 id="simple-fanout">Simple fanout</h3>

<p>A fanout configuration routes traffic from a single IP address to more than one service,
based on the HTTP URI being requested. An Ingress allows you to keep the number of loadbalancers
down to a minimum. For example, a setup like:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">foo.bar.com -&gt; <span style="color:#666">178</span>.91.123.132 -&gt; / foo    service1:4200
                                 / bar    service2:8080</code></pre></div>
<p>would require an Ingress such as:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">apiVersion:<span style="color:#bbb"> </span>extensions/v1beta1<span style="color:#bbb">
</span><span style="color:#bbb"></span>kind:<span style="color:#bbb"> </span>Ingress<span style="color:#bbb">
</span><span style="color:#bbb"></span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>name:<span style="color:#bbb"> </span>simple-fanout-example<span style="color:#bbb">
</span><span style="color:#bbb">  </span>annotations:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>nginx.ingress.kubernetes.io/rewrite-target:<span style="color:#bbb"> </span>/<span style="color:#bbb">
</span><span style="color:#bbb"></span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>rules:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>host:<span style="color:#bbb"> </span>foo.bar.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span>http:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>paths:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>-<span style="color:#bbb"> </span>path:<span style="color:#bbb"> </span>/foo<span style="color:#bbb">
</span><span style="color:#bbb">        </span>backend:<span style="color:#bbb">
</span><span style="color:#bbb">          </span>serviceName:<span style="color:#bbb"> </span>service1<span style="color:#bbb">
</span><span style="color:#bbb">          </span>servicePort:<span style="color:#bbb"> </span><span style="color:#666">4200</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>-<span style="color:#bbb"> </span>path:<span style="color:#bbb"> </span>/bar<span style="color:#bbb">
</span><span style="color:#bbb">        </span>backend:<span style="color:#bbb">
</span><span style="color:#bbb">          </span>serviceName:<span style="color:#bbb"> </span>service2<span style="color:#bbb">
</span><span style="color:#bbb">          </span>servicePort:<span style="color:#bbb"> </span><span style="color:#666">8080</span></code></pre></div>
<p>When you create the Ingress with <code>kubectl create -f</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl describe ingress simple-fanout-example</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">Name:             simple-fanout-example
Namespace:        default
Address:          <span style="color:#666">178</span>.91.123.132
Default backend:  default-http-backend:80 <span style="color:#666">(</span><span style="color:#666">10</span>.8.2.3:8080<span style="color:#666">)</span>
Rules:
  Host         Path  Backends
  ----         ----  --------
  foo.bar.com
               /foo   service1:4200 <span style="color:#666">(</span><span style="color:#666">10</span>.8.0.90:4200<span style="color:#666">)</span>
               /bar   service2:8080 <span style="color:#666">(</span><span style="color:#666">10</span>.8.0.91:8080<span style="color:#666">)</span>
Annotations:
  nginx.ingress.kubernetes.io/rewrite-target:  /
Events:
  Type     Reason  Age                From                     Message
  ----     ------  ----               ----                     -------
  Normal   ADD     22s                loadbalancer-controller  default/test</code></pre></div>
<p>The Ingress controller provisions an implementation specific loadbalancer
that satisfies the Ingress, as long as the services (<code>s1</code>, <code>s2</code>) exist.
When it has done so, you can see the address of the loadbalancer at the
Address field.</p>

<blockquote class="note">
  <div><strong>Note:</strong> Depending on the <a href="/docs/concepts/services-networking/ingress-controllers">Ingress controller</a> you are using, you may need to
create a default-http-backend <a href="/docs/concepts/services-networking/service/">Service</a>.</div>
</blockquote>

<h3 id="name-based-virtual-hosting">Name based virtual hosting</h3>

<p>Name-based virtual hosts support routing HTTP traffic to multiple host names at the same IP address.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-none" data-lang="none">foo.bar.com --|                 |-&gt; foo.bar.com s1:80
              | 178.91.123.132  |
bar.foo.com --|                 |-&gt; bar.foo.com s2:80</code></pre></div>
<p>The following Ingress tells the backing loadbalancer to route requests based on
the <a href="https://tools.ietf.org/html/rfc7230#section-5.4" target="_blank">Host header</a>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">apiVersion:<span style="color:#bbb"> </span>extensions/v1beta1<span style="color:#bbb">
</span><span style="color:#bbb"></span>kind:<span style="color:#bbb"> </span>Ingress<span style="color:#bbb">
</span><span style="color:#bbb"></span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>name:<span style="color:#bbb"> </span>name-virtual-host-ingress<span style="color:#bbb">
</span><span style="color:#bbb"></span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>rules:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>host:<span style="color:#bbb"> </span>foo.bar.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span>http:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>paths:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>-<span style="color:#bbb"> </span>backend:<span style="color:#bbb">
</span><span style="color:#bbb">          </span>serviceName:<span style="color:#bbb"> </span>service1<span style="color:#bbb">
</span><span style="color:#bbb">          </span>servicePort:<span style="color:#bbb"> </span><span style="color:#666">80</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>host:<span style="color:#bbb"> </span>bar.foo.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span>http:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>paths:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>-<span style="color:#bbb"> </span>backend:<span style="color:#bbb">
</span><span style="color:#bbb">          </span>serviceName:<span style="color:#bbb"> </span>service2<span style="color:#bbb">
</span><span style="color:#bbb">          </span>servicePort:<span style="color:#bbb"> </span><span style="color:#666">80</span></code></pre></div>
<p>If you create an Ingress resource without any hosts defined in the rules, then any
web traffic to the IP address of your Ingress controller can be matched without a name based
virtual host being required. For example, the following Ingress resource will route traffic
requested for <code>first.bar.com</code> to <code>service1</code>, <code>second.foo.com</code> to <code>service2</code>, and any traffic
to the IP address without a hostname defined in request (that is, without a request header being
presented) to <code>service3</code>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">apiVersion:<span style="color:#bbb"> </span>extensions/v1beta1<span style="color:#bbb">
</span><span style="color:#bbb"></span>kind:<span style="color:#bbb"> </span>Ingress<span style="color:#bbb">
</span><span style="color:#bbb"></span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>name:<span style="color:#bbb"> </span>name-virtual-host-ingress<span style="color:#bbb">
</span><span style="color:#bbb"></span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>rules:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>host:<span style="color:#bbb"> </span>first.bar.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span>http:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>paths:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>-<span style="color:#bbb"> </span>backend:<span style="color:#bbb">
</span><span style="color:#bbb">          </span>serviceName:<span style="color:#bbb"> </span>service1<span style="color:#bbb">
</span><span style="color:#bbb">          </span>servicePort:<span style="color:#bbb"> </span><span style="color:#666">80</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>host:<span style="color:#bbb"> </span>second.foo.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span>http:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>paths:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>-<span style="color:#bbb"> </span>backend:<span style="color:#bbb">
</span><span style="color:#bbb">          </span>serviceName:<span style="color:#bbb"> </span>service2<span style="color:#bbb">
</span><span style="color:#bbb">          </span>servicePort:<span style="color:#bbb"> </span><span style="color:#666">80</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>http:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>paths:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>-<span style="color:#bbb"> </span>backend:<span style="color:#bbb">
</span><span style="color:#bbb">          </span>serviceName:<span style="color:#bbb"> </span>service3<span style="color:#bbb">
</span><span style="color:#bbb">          </span>servicePort:<span style="color:#bbb"> </span><span style="color:#666">80</span></code></pre></div>
<h3 id="tls">TLS</h3>

<p>You can secure an Ingress by specifying a <a href="/docs/concepts/configuration/secret">secret</a>
that contains a TLS private key and certificate. Currently the Ingress only
supports a single TLS port, 443, and assumes TLS termination. If the TLS
configuration section in an Ingress specifies different hosts, they will be
multiplexed on the same port according to the hostname specified through the
SNI TLS extension (provided the Ingress controller supports SNI). The TLS secret
must contain keys named <code>tls.crt</code> and <code>tls.key</code> that contain the certificate
and private key to use for TLS, e.g.:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">apiVersion:<span style="color:#bbb"> </span>v1<span style="color:#bbb">
</span><span style="color:#bbb"></span>data:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>tls.crt:<span style="color:#bbb"> </span>base64<span style="color:#bbb"> </span>encoded<span style="color:#bbb"> </span>cert<span style="color:#bbb">
</span><span style="color:#bbb">  </span>tls.key:<span style="color:#bbb"> </span>base64<span style="color:#bbb"> </span>encoded<span style="color:#bbb"> </span>key<span style="color:#bbb">
</span><span style="color:#bbb"></span>kind:<span style="color:#bbb"> </span>Secret<span style="color:#bbb">
</span><span style="color:#bbb"></span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>name:<span style="color:#bbb"> </span>testsecret-tls<span style="color:#bbb">
</span><span style="color:#bbb">  </span>namespace:<span style="color:#bbb"> </span>default<span style="color:#bbb">
</span><span style="color:#bbb"></span>type:<span style="color:#bbb"> </span>kubernetes.io/tls</code></pre></div>
<p>Referencing this secret in an Ingress will tell the Ingress controller to
secure the channel from the client to the loadbalancer using TLS. You need to make
sure the TLS secret you created came from a certificate that contains a CN
for <code>sslexample.foo.com</code>.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">apiVersion:<span style="color:#bbb"> </span>extensions/v1beta1<span style="color:#bbb">
</span><span style="color:#bbb"></span>kind:<span style="color:#bbb"> </span>Ingress<span style="color:#bbb">
</span><span style="color:#bbb"></span>metadata:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>name:<span style="color:#bbb"> </span>tls-example-ingress<span style="color:#bbb">
</span><span style="color:#bbb"></span>spec:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>tls:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>hosts:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>-<span style="color:#bbb"> </span>sslexample.foo.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span>secretName:<span style="color:#bbb"> </span>testsecret-tls<span style="color:#bbb">
</span><span style="color:#bbb">  </span>rules:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>-<span style="color:#bbb"> </span>host:<span style="color:#bbb"> </span>sslexample.foo.com<span style="color:#bbb">
</span><span style="color:#bbb">      </span>http:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>paths:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>-<span style="color:#bbb"> </span>path:<span style="color:#bbb"> </span>/<span style="color:#bbb">
</span><span style="color:#bbb">          </span>backend:<span style="color:#bbb">
</span><span style="color:#bbb">            </span>serviceName:<span style="color:#bbb"> </span>service1<span style="color:#bbb">
</span><span style="color:#bbb">            </span>servicePort:<span style="color:#bbb"> </span><span style="color:#666">80</span></code></pre></div>
<blockquote class="note">
  <div><strong>Note:</strong> There is a gap between TLS features supported by various Ingress
controllers. Please refer to documentation on
<a href="https://git.k8s.io/ingress-nginx/README.md#https" target="_blank">nginx</a>,
<a href="https://git.k8s.io/ingress-gce/README.md#frontend-https" target="_blank">GCE</a>, or any other
platform specific Ingress controller to understand how TLS works in your environment.</div>
</blockquote>

<h3 id="loadbalancing">Loadbalancing</h3>

<p>An Ingress controller is bootstrapped with some load balancing policy settings
that it applies to all Ingress, such as the load balancing algorithm, backend
weight scheme, and others. More advanced load balancing concepts
(e.g. persistent sessions, dynamic weights) are not yet exposed through the
Ingress. You can still get these features through the
<a href="https://github.com/kubernetes/ingress-nginx" target="_blank">service loadbalancer</a>.</p>

<p>It&rsquo;s also worth noting that even though health checks are not exposed directly
through the Ingress, there exist parallel concepts in Kubernetes such as
<a href="/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/">readiness probes</a>
which allow you to achieve the same end result. Please review the controller
specific docs to see how they handle health checks (
<a href="https://git.k8s.io/ingress-nginx/README.md" target="_blank">nginx</a>,
<a href="https://git.k8s.io/ingress-gce/README.md#health-checks" target="_blank">GCE</a>).</p>

<h2 id="updating-an-ingress">Updating an Ingress</h2>

<p>To update an existing Ingress to add a new Host, you can update it by editing the resource:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl describe ingress test</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">Name:             <span style="color:#a2f">test</span>
Namespace:        default
Address:          <span style="color:#666">178</span>.91.123.132
Default backend:  default-http-backend:80 <span style="color:#666">(</span><span style="color:#666">10</span>.8.2.3:8080<span style="color:#666">)</span>
Rules:
  Host         Path  Backends
  ----         ----  --------
  foo.bar.com
               /foo   s1:80 <span style="color:#666">(</span><span style="color:#666">10</span>.8.0.90:80<span style="color:#666">)</span>
Annotations:
  nginx.ingress.kubernetes.io/rewrite-target:  /
Events:
  Type     Reason  Age                From                     Message
  ----     ------  ----               ----                     -------
  Normal   ADD     35s                loadbalancer-controller  default/test</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl edit ingress test</code></pre></div>
<p>This should pop up an editor with the existing yaml, modify it to include the new Host:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">spec:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>rules:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>host:<span style="color:#bbb"> </span>foo.bar.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span>http:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>paths:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>-<span style="color:#bbb"> </span>backend:<span style="color:#bbb">
</span><span style="color:#bbb">          </span>serviceName:<span style="color:#bbb"> </span>s1<span style="color:#bbb">
</span><span style="color:#bbb">          </span>servicePort:<span style="color:#bbb"> </span><span style="color:#666">80</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>path:<span style="color:#bbb"> </span>/foo<span style="color:#bbb">
</span><span style="color:#bbb">  </span>-<span style="color:#bbb"> </span>host:<span style="color:#bbb"> </span>bar.baz.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span>http:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>paths:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>-<span style="color:#bbb"> </span>backend:<span style="color:#bbb">
</span><span style="color:#bbb">          </span>serviceName:<span style="color:#bbb"> </span>s2<span style="color:#bbb">
</span><span style="color:#bbb">          </span>servicePort:<span style="color:#bbb"> </span><span style="color:#666">80</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>path:<span style="color:#bbb"> </span>/foo<span style="color:#bbb">
</span><span style="color:#bbb"></span>..</code></pre></div>
<p>Saving the yaml will update the resource in the API server, which should tell the
Ingress controller to reconfigure the loadbalancer.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl describe ingress test</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">Name:             <span style="color:#a2f">test</span>
Namespace:        default
Address:          <span style="color:#666">178</span>.91.123.132
Default backend:  default-http-backend:80 <span style="color:#666">(</span><span style="color:#666">10</span>.8.2.3:8080<span style="color:#666">)</span>
Rules:
  Host         Path  Backends
  ----         ----  --------
  foo.bar.com
               /foo   s1:80 <span style="color:#666">(</span><span style="color:#666">10</span>.8.0.90:80<span style="color:#666">)</span>
  bar.baz.com
               /foo   s2:80 <span style="color:#666">(</span><span style="color:#666">10</span>.8.0.91:80<span style="color:#666">)</span>
Annotations:
  nginx.ingress.kubernetes.io/rewrite-target:  /
Events:
  Type     Reason  Age                From                     Message
  ----     ------  ----               ----                     -------
  Normal   ADD     45s                loadbalancer-controller  default/test</code></pre></div>
<p>You can achieve the same by invoking <code>kubectl replace -f</code> on a modified Ingress yaml file.</p>

<h2 id="failing-across-availability-zones">Failing across availability zones</h2>

<p>Techniques for spreading traffic across failure domains differs between cloud providers.
Please check the documentation of the relevant <a href="/docs/concepts/services-networking/ingress-controllers">Ingress controller</a> for details. You can also refer to the <a href="/docs/concepts/cluster-administration/federation/">federation documentation</a>
for details on deploying Ingress in a federated cluster.</p>

<h2 id="future-work">Future Work</h2>

<p>Track <a href="https://github.com/kubernetes/community/tree/master/sig-network" target="_blank">SIG Network</a>
for more details on the evolution of the ingress and related resources. You may also track the
<a href="https://github.com/kubernetes/ingress/tree/master" target="_blank">Ingress repository</a> for more details on the
evolution of various Ingress controllers.</p>

<h2 id="alternatives">Alternatives</h2>

<p>You can expose a Service in multiple ways that don&rsquo;t directly involve the Ingress resource:</p>

<ul>
<li>Use <a href="/docs/concepts/services-networking/service/#loadbalancer">Service.Type=LoadBalancer</a></li>
<li>Use <a href="/docs/concepts/services-networking/service/#nodeport">Service.Type=NodePort</a></li>
<li>Use a <a href="https://git.k8s.io/contrib/for-demos/proxy-to-service" target="_blank">Port Proxy</a></li>
</ul>












<h2 id="what-s-next">What&#39;s next</h2>
<ul>
<li><a href="/docs/tasks/access-application-cluster/ingress-minikube">Set up Ingress on Minikube with the NGINX Controller</a></li>
</ul>






<nav class="pagination" style="font-size: 16px; font-weight: bold"><a class="nav nav-prev" href="/docs/concepts/services-networking/connect-applications-service/" title="Connecting Applications with Services"><i class="fas fa-arrow-left" aria-hidden="true"></i> Prev - Connecting Applications with Services</a>
<a class="nav nav-next" style="float:right"  href="/docs/concepts/services-networking/ingress-controllers/" title="Ingress Controllers">Next - Ingress Controllers <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav>


  
  <h2>Feedback</h2>
  <p class="feedback--prompt">Was this page helpful? </p>
  <button class="button feedback--yes">Yes</button>
  <button class="button feedback--no">No</button>
  <p class="feedback--response feedback--response__hidden">
    Thanks for the feedback. If you have a specific, answerable question about how to use Kubernetes,
    ask it on <a target="_blank" rel="noopener"
    href="https://stackoverflow.com/questions/tagged/kubernetes">Stack Overflow</a>. Open
    an issue in the GitHub repo if you want to <a class="feedback--link" target="_blank" rel="noopener"
    href="https://github.com/kubernetes/website/issues/new?title=Issue%20with%20k8s.io">report a problem</a> or
    <a class="feedback--link" target="_blank" rel="noopener"
    href="https://github.com/kubernetes/website/issues/new?title=Improvement%20for%20k8s.io">suggest an improvement</a>.
  </p>
  <script>
    const yes = document.querySelector('.feedback--yes');
    const no = document.querySelector('.feedback--no');
    document.querySelectorAll('.feedback--link').forEach(link => {
      link.href = link.href + window.location.pathname;
    });
    const sendFeedback = (value) => {
      if (!gtag) { console.log('!gtag'); }
      gtag('event', 'click', {
        'event_category': 'Helpful',
        'event_label': window.location.pathname,
        value
      });
    };
    const disableButtons = () => {
      yes.disabled = true;
      yes.classList.add('feedback--button__disabled');
      no.disabled = true;
      no.classList.add('feedback--button__disabled');
    };
    yes.addEventListener('click', () => {
      sendFeedback(1);
      disableButtons();
      document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');
    });
    no.addEventListener('click', () => {
      sendFeedback(0);
      disableButtons();
      document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');
    });
  </script>


  <div id="pre-footer"> 
  <hr />

  <div class="issue-button-container">
    <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs%5cconcepts%5cservices-networking%5cingress.md?pixel" alt="Analytics" /></a></p>
    
    
    <script type="text/javascript">
    PDRTJS_settings_8345992 = {
    "id" : "8345992",
    "unique_id" : "\/docs\/concepts\/services-networking\/ingress\/",
    "title" : "Ingress",
    "permalink" : "https:\/\/qinlj.github.io\/docs\/concepts\/services-networking\/ingress\/"
    };
    (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
    </script>
    <a href="" onclick="window.open('https://github.com/kubernetes/website/issues/new?title=Issue%20with%20' +
    'k8s.io'+window.location.pathname)" class="button issue">Create an Issue</a>
    
    
    
    <a href="https://github.com/kubernetes/website/edit/master/content/en/docs%5cconcepts%5cservices-networking%5cingress.md" class="button issue">Edit This Page</a>
    
  </div>
  

  <div id="lastedit" class="lastedit issue-button-container">
    Page last modified on March 06, 2019 at 1:46 AM PST by
    <a href="https://github.com/kubernetes/website/commit/c1dfba630587fa36d4c5f79a09560765293172e6/">Fix broken link in Ingress documentation (#12974)</a> (<a href="https://github.com/kubernetes/website/commits/master/content/en/docs%5cconcepts%5cservices-networking%5cingress.md">Page History</a>)
  </div>
  
</div>

  <div class="post-comment">
    
    


<div id="lv-container" data-id="city" data-uid="MTAyMC80MzQxMi8xOTk1Mw==">
  <script type="text/javascript">
    (function(d, s) {
      var j, e = d.getElementsByTagName(s)[0];

      if (typeof LivereTower === 'function') { return; }

      j = d.createElement(s);
      j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
      j.async = true;

      e.parentNode.insertBefore(j, e);
    })(document, 'script');
  </script>
  <noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
</div>



  </div>
  
  <div class="container" role="main" itemscope itemtype="http://schema.org/Article">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        
        
        
<div>
  <h5 id="tags">Tags: 
  </h5>
</div>
        
        <article role="main" class="blog-post" itemprop="articleBody" id="content">
          ...
          





          
          <div class="social-share" data-initialized="true" data-wechat-qrcode-title="不扫别后悔">
  <center>
    <font style="font-size:18px;color:darkcyan;">分享到：</font>
    <a href="#" class="social-share-icon icon-weibo"></a>
    <a href="#" class="social-share-icon icon-wechat"></a>
    <a href="#" class="social-share-icon icon-twitter"></a>
    <a href="#" class="social-share-icon icon-linkedin"></a>
    <a href="#" class="social-share-icon icon-facebook"></a>
    <a href="#" class="social-share-icon icon-qq"></a>
    <a href="#" class="social-share-icon icon-qzone"></a>
  </center>
</div>


<script src="https://hugo-picture.oss-cn-beijing.aliyuncs.com/social-share.min.js"></script>
          
        </article>
      </div>
    </div>
  </div>
</section>

<footer>
    <main class="light-text">
        <nav>
            
            
            
            <a href="/docs/home/">Home</a>
            
            <a href="/blog/">Blog</a>
            
            <a href="/partners/">Partners</a>
            
            <a href="/community/">Community</a>
            
            <a href="/case-studies/">Case Studies</a>
            
        </nav>
        <div class="social">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://discuss.kubernetes.io" class="mailing-list"><span>Forum</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
            <div>
                
                <a href="https://git.k8s.io/community/contributors/guide" class="button">Contribute</a>
            </div>
        </div>
        <div id="miceType" class="center">
            &copy; 2019 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a></a>
        </div>
        <div id="miceType" class="center">
            Copyright &copy; 2019 The Linux Foundation &reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">Trademark Usage page</a>
        </div>
        <div id="miceType" class="center">
            ICP license: 京ICP备17074266号-3
        </div>
    </main>
</footer>

<button class="flyout-button" onclick="kub.toggleToc()"></button>

<script>

(function () {
    window.addEventListener('DOMContentLoaded', init)

        
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
        if (!toc) return
            var container = toc.querySelector('.container')

                
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>



<script language="application/javascript">
  
  (function addHeadingLinks(){
    var article = document.getElementById('docsContent');
    var headings = article.querySelectorAll('h1, h2, h3, h4, h5, h6');
    headings.forEach(function(heading){
      if(heading.id){
        var a = document.createElement('a');
        a.innerHTML = heading.innerHTML;
        a.href = '#'+heading.id;
        a.classList.add('inpage_heading');
        heading.innerHTML = '';
        heading.appendChild(a);
      }
    });
  })();
</script>
</body>
</html>