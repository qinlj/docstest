<!DOCTYPE html>
<html id="docs" lang="en" class="">
<head>
  

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-36037335-10"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-36037335-10');
</script>
<meta charset="utf-8">
<title>Kubelet authentication/authorization - SuperMap iDesktop .NET</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" type="image/png" href="/images/favicon.png">
<link rel="stylesheet" href="/css/base_fonts.css">
<link rel="stylesheet" href="/css/styles.css">
<link rel="stylesheet" href="/css/jquery-ui.min.css">
<link rel="stylesheet" href="/css/sweetalert.min.css">
<link rel="stylesheet" href="/css/callouts.css">
<link rel="stylesheet" href="/css/custom-jekyll/tags.css">
<link rel="stylesheet" href="https://qinlj.github.io/css/main.css" />
<link rel="stylesheet" href="https://qinlj.github.io/css/share.min.css" />



<meta name="description" content="Overview Kubelet authentication Kubelet authorization    Overview A kubelet&rsquo;s HTTPS endpoint exposes APIs which give access to data of varying sensitivity, and allow you to perform operations with varying levels of power on the node and within containers.
This document describes how to authenticate and authorize access to the kubelet&rsquo;s HTTPS endpoint.
Kubelet authentication By default, requests to the kubelet&rsquo;s HTTPS endpoint that are not rejected by other configured authentication methods are treated as anonymous requests, and given a username of system:anonymous and a group of system:unauthenticated.">
<meta property="og:description" content="Overview Kubelet authentication Kubelet authorization    Overview A kubelet&rsquo;s HTTPS endpoint exposes APIs which give access to data of varying sensitivity, and allow you to perform operations with varying levels of power on the node and within containers.
This document describes how to authenticate and authorize access to the kubelet&rsquo;s HTTPS endpoint.
Kubelet authentication By default, requests to the kubelet&rsquo;s HTTPS endpoint that are not rejected by other configured authentication methods are treated as anonymous requests, and given a username of system:anonymous and a group of system:unauthenticated.">
<meta name="twitter:description" content="Overview Kubelet authentication Kubelet authorization    Overview A kubelet&rsquo;s HTTPS endpoint exposes APIs which give access to data of varying sensitivity, and allow you to perform operations with varying levels of power on the node and within containers.
This document describes how to authenticate and authorize access to the kubelet&rsquo;s HTTPS endpoint.
Kubelet authentication By default, requests to the kubelet&rsquo;s HTTPS endpoint that are not rejected by other configured authentication methods are treated as anonymous requests, and given a username of system:anonymous and a group of system:unauthenticated.">
<meta property="og:url" content="https://qinlj.github.io/docs/reference/command-line-tools-reference/kubelet-authentication-authorization/">
<meta property="og:title" content="Kubelet authentication/authorization">
<meta name="twitter:title" content="Kubelet authentication/authorization">

<meta name="twitter:image:alt"   content="SuperMap iDesktop .NET">

<meta property="og:image" content="/images/kubernetes-horizontal-color.png">

<meta property="og:type" content="article">
<script src="/js/anchor-4.1.1.min.js"></script>
<script src="/js/jquery-3.2.1.min.js"></script>
<script src="/js/jquery-ui-1.12.1.min.js"></script>
<script src="/js/bootstrap-3.3.7.min.js"></script>
<script src="/js/sweetalert-1.1.3.min.js"></script>
<script src="/js/script.js"></script>
<script src="/js/custom-jekyll/tags.js"></script>


</head>
<body>
<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/" class="logo"></a>
  <div class="left-buttons" data-auto-burger="primary">
    <ul class="global-nav">
      <li>
        <a href="#">
          v1.13 <span class="ui-icon ui-icon-carat-1-s"></span>
        </a>
        <ul>
          
          <li><a href="https://kubernetes.io">v1.13</a></li>
          
          <li><a href="https://supermaphehh.github.io/zh/">iDesktop .NET</a></li>
          
          <li><a href="https://v1-12.docs.kubernetes.io">v1.12</a></li>
          
          <li><a href="https://v1-11.docs.kubernetes.io">v1.11</a></li>
          
          <li><a href="https://v1-10.docs.kubernetes.io">v1.10</a></li>
          
          <li><a href="https://v1-9.docs.kubernetes.io">v1.9</a></li>
          
        </ul>
      </li>
    </ul>
  </div>
    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            
            
            <li><a href="/docs/" class="active">Documentation</a></li>
            
            <li><a href="/blog/">Blog</a></li>
            
            <li><a href="/partners/">Partners</a></li>
            
            <li><a href="/community/">Community</a></li>
            
            <li><a href="/case-studies/">Case Studies</a></li>
            
            
            
             <li>
                <a href="#">
                    English <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="/zh/">中文 Chinese</a></li>
                
                    <li><a href="/ko/">한국어 Korean</a></li>
                
                    <li><a href="/ja/">日本語 Japanese</a></li>
                
                    <li><a href="/fr/">Français</a></li>
                
                    <li><a href="/it/">Italian</a></li>
                
                </ul>
            </li>

            <li>
                <a href="#">
                    v1.13 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="https://kubernetes.io">v1.13</a></li>
                
                    <li><a href="https://supermaphehh.github.io/zh/">iDesktop .NET</a></li>
                
                    <li><a href="https://v1-12.docs.kubernetes.io">v1.12</a></li>
                
                    <li><a href="https://v1-11.docs.kubernetes.io">v1.11</a></li>
                
                    <li><a href="https://v1-10.docs.kubernetes.io">v1.10</a></li>
                
                    <li><a href="https://v1-9.docs.kubernetes.io">v1.9</a></li>
                
                </ul>
            </li>
        </ul>

        <form id="searchBox" action="/search/">
          <input type="text" id="search" name="q" placeholder="Search" aria-label="Search">
        </form>

    </div>

    <nav id="mainNav">
        <main data-auto-burger="primary">
         
           <div class="nav-box">
            <h3><a href="/docs/tutorials/hello-minikube/">Get Started</a></h3>
           <p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>

        </div>
         
           <div class="nav-box">
            <h3><a href="/docs/home/">Documentation</a></h3>
           <p>Learn how to use Kubernetes with conceptual, tutorial, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>

        </div>
         
           <div class="nav-box">
            <h3><a href="/blog/">Blog</a></h3>
           <p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>

        </div>
         
        </main>
        <main data-auto-burger="primary">
        <div class="left">
            <h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
            <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
        </div>

        <div class="right">
            <h5 class="github-invite">Explore the community</h5>
            <div class="social">
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack Slack</span></a>
                <a href="https://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://discuss.kubernetes.io" class="mailing-list"><span>Forum</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
        </div>
        <div class="clear" style="clear: both"></div>
        </main>
    </nav>
</header>



<section id="hero" class="light-text no-sub">
  

















<h1>Reference</h1>
<h5></h5>




<div id="vendorStrip" class="light-text">
	<ul>
		
		
		<li><a href="/docs/home/">HOME</a></li>
		
		
		<li><a href="/docs/surfaceanalyst/">SURFACEANALYSIS</a></li>
		
		
		<li><a href="/docs/setup/">SETUP</a></li>
		
		
		<li><a href="/docs/concepts/">CONCEPTS</a></li>
		
		
		<li><a href="/docs/tasks/">TASKS</a></li>
		
		
		<li><a href="/docs/tutorials/">TUTORIALS</a></li>
		
		
		<li><a href="/docs/reference/" class="YAH">REFERENCE</a></li>
		
		
		<li><a href="/docs/contribute/">CONTRIBUTE</a></li>
		
	</ul>
	<form id="searchBox" action="/docs/search/">
		<input type="text" id="search" name="q" placeholder="Search" aria-label="Search">
  </form>
</div>

</section>



<section id="encyclopedia">
  
<div id="docsToc">
     <div class="pi-accordion">
    	
        
        
        
        
        
         
             
                 
             
         
             
                 
             
         
             
                 
             
         
             
                 
             
         
             
                 
             
         
             
                 
             
         
             
                 
             
         
             
                 
                          
                          
                 
             
         
             
         
         
        
        <a class="item" data-title="Reference" href="/docs/reference/"></a>

	
	
	
	
		
			

<a class="item" data-title="Standardized Glossary" href="/docs/reference/glossary/"></a>

		
	
		
			
<div class="item" data-title="Kubernetes Issues and Security">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Kubernetes Issue Tracker" href="/docs/reference/issues-security/issues/"></a>

		
	
		
			

<a class="item" data-title="Kubernetes Security and Disclosure Information" href="/docs/reference/issues-security/security/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Using the Kubernetes API">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Kubernetes API Overview" href="/docs/reference/using-api/api-overview/"></a>

		
	
		
			

<a class="item" data-title="Kubernetes API Concepts" href="/docs/reference/using-api/api-concepts/"></a>

		
	
		
			

<a class="item" data-title="Client Libraries" href="/docs/reference/using-api/client-libraries/"></a>

		
	
		
			

<a class="item" data-title="Kubernetes Deprecation Policy" href="/docs/reference/using-api/deprecation-policy/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Accessing the API">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Controlling Access to the Kubernetes API" href="/docs/reference/access-authn-authz/controlling-access/"></a>

		
	
		
			

<a class="item" data-title="Authenticating" href="/docs/reference/access-authn-authz/authentication/"></a>

		
	
		
			

<a class="item" data-title="Authenticating with Bootstrap Tokens" href="/docs/reference/access-authn-authz/bootstrap-tokens/"></a>

		
	
		
			

<a class="item" data-title="Using Admission Controllers" href="/docs/reference/access-authn-authz/admission-controllers/"></a>

		
	
		
			

<a class="item" data-title="Dynamic Admission Control" href="/docs/reference/access-authn-authz/extensible-admission-controllers/"></a>

		
	
		
			

<a class="item" data-title="Managing Service Accounts" href="/docs/reference/access-authn-authz/service-accounts-admin/"></a>

		
	
		
			

<a class="item" data-title="Authorization Overview" href="/docs/reference/access-authn-authz/authorization/"></a>

		
	
		
			

<a class="item" data-title="Using RBAC Authorization" href="/docs/reference/access-authn-authz/rbac/"></a>

		
	
		
			

<a class="item" data-title="Using ABAC Authorization" href="/docs/reference/access-authn-authz/abac/"></a>

		
	
		
			

<a class="item" data-title="Using Node Authorization" href="/docs/reference/access-authn-authz/node/"></a>

		
	
		
			

<a class="item" data-title="Webhook Mode" href="/docs/reference/access-authn-authz/webhook/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="API Reference">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Well-Known Labels, Annotations and Taints" href="/docs/reference/kubernetes-api/labels-annotations-taints/"></a>

		
	
		
			

<a class="item" data-title="v1.13" href="/docs/reference/kubernetes-api/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Federation API">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="extensions/v1beta1 Model Definitions" href="/docs/reference/federation/extensions/v1beta1/definitions/"></a>

		
	
		
			

<a class="item" data-title="extensions/v1beta1 Operations" href="/docs/reference/federation/extensions/v1beta1/operations/"></a>

		
	
		
			

<a class="item" data-title="federation/v1beta1 Model Definitions" href="/docs/reference/federation/federation/v1beta1/definitions/"></a>

		
	
		
			

<a class="item" data-title="federation/v1beta1 Operations" href="/docs/reference/federation/federation/v1beta1/operations/"></a>

		
	
		
			

<a class="item" data-title="v1 Model Definitions" href="/docs/reference/federation/v1/definitions/"></a>

		
	
		
			

<a class="item" data-title="v1 Operations" href="/docs/reference/federation/v1/operations/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Setup tools reference">
	<div class="container">
		
		
	
	
	
	
		
			
<div class="item" data-title="Kubeadm">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Overview of kubeadm" href="/docs/reference/setup-tools/kubeadm/kubeadm/"></a>

		
	
		
			

<a class="item" data-title="kubeadm init" href="/docs/reference/setup-tools/kubeadm/kubeadm-init/"></a>

		
	
		
			

<a class="item" data-title="kubeadm join" href="/docs/reference/setup-tools/kubeadm/kubeadm-join/"></a>

		
	
		
			

<a class="item" data-title="kubeadm upgrade" href="/docs/reference/setup-tools/kubeadm/kubeadm-upgrade/"></a>

		
	
		
			

<a class="item" data-title="kubeadm config" href="/docs/reference/setup-tools/kubeadm/kubeadm-config/"></a>

		
	
		
			

<a class="item" data-title="kubeadm reset" href="/docs/reference/setup-tools/kubeadm/kubeadm-reset/"></a>

		
	
		
			

<a class="item" data-title="kubeadm token" href="/docs/reference/setup-tools/kubeadm/kubeadm-token/"></a>

		
	
		
			

<a class="item" data-title="kubeadm version" href="/docs/reference/setup-tools/kubeadm/kubeadm-version/"></a>

		
	
		
			

<a class="item" data-title="kubeadm alpha" href="/docs/reference/setup-tools/kubeadm/kubeadm-alpha/"></a>

		
	
		
			

<a class="item" data-title="kubeadm init phase" href="/docs/reference/setup-tools/kubeadm/kubeadm-init-phase/"></a>

		
	
		
			

<a class="item" data-title="Implementation details" href="/docs/reference/setup-tools/kubeadm/implementation-details/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="kubefed">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="kubefed" href="/docs/reference/setup-tools/kubefed/kubefed/"></a>

		
	
		
			

<a class="item" data-title="kubefed options" href="/docs/reference/setup-tools/kubefed/kubefed_options/"></a>

		
	
		
			

<a class="item" data-title="kubefed init" href="/docs/reference/setup-tools/kubefed/kubefed_init/"></a>

		
	
		
			

<a class="item" data-title="kubefed join" href="/docs/reference/setup-tools/kubefed/kubefed_join/"></a>

		
	
		
			

<a class="item" data-title="kubefed unjoin" href="/docs/reference/setup-tools/kubefed/kubefed_unjoin/"></a>

		
	
		
			

<a class="item" data-title="kubefed version" href="/docs/reference/setup-tools/kubefed/kubefed_version/"></a>

		
	

	</div>
</div>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="Command line tools reference">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Feature Gates" href="/docs/reference/command-line-tools-reference/feature-gates/"></a>

		
	
		
			

<a class="item" data-title="Kubelet authentication/authorization" href="/docs/reference/command-line-tools-reference/kubelet-authentication-authorization/"></a>

		
	
		
			

<a class="item" data-title="TLS bootstrapping" href="/docs/reference/command-line-tools-reference/kubelet-tls-bootstrapping/"></a>

		
	
		
			

<a class="item" data-title="cloud-controller-manager" href="/docs/reference/command-line-tools-reference/cloud-controller-manager/"></a>

		
	
		
			

<a class="item" data-title="federation-apiserver" href="/docs/reference/command-line-tools-reference/federation-apiserver/"></a>

		
	
		
			

<a class="item" data-title="federation-controller-manager" href="/docs/reference/command-line-tools-reference/federation-controller-manager/"></a>

		
	
		
			

<a class="item" data-title="kube-apiserver" href="/docs/reference/command-line-tools-reference/kube-apiserver/"></a>

		
	
		
			

<a class="item" data-title="kube-controller-manager" href="/docs/reference/command-line-tools-reference/kube-controller-manager/"></a>

		
	
		
			

<a class="item" data-title="kube-proxy" href="/docs/reference/command-line-tools-reference/kube-proxy/"></a>

		
	
		
			

<a class="item" data-title="kube-scheduler" href="/docs/reference/command-line-tools-reference/kube-scheduler/"></a>

		
	
		
			

<a class="item" data-title="kubelet" href="/docs/reference/command-line-tools-reference/kubelet/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="kubectl CLI">
	<div class="container">
		
		
	
	
	
	
		
			

<a class="item" data-title="Overview of kubectl" href="/docs/reference/kubectl/overview/"></a>

		
	
		
			

<a class="item" data-title="JSONPath Support" href="/docs/reference/kubectl/jsonpath/"></a>

		
	
		
			

<a class="item" data-title="kubectl" href="/docs/reference/kubectl/kubectl/"></a>

		
	
		
			

<a class="item" data-title="kubectl Cheat Sheet" href="/docs/reference/kubectl/cheatsheet/"></a>

		
	
		
			

<a class="item" data-title="kubectl Commands" href="/docs/reference/kubectl/kubectl-cmds/"></a>

		
	
		
			

<a class="item" data-title="kubectl Usage Conventions" href="/docs/reference/kubectl/conventions/"></a>

		
	
		
			

<a class="item" data-title="kubectl for Docker Users" href="/docs/reference/kubectl/docker-cli-to-kubectl/"></a>

		
	

	</div>
</div>

		
	
		
			

<a class="item" data-title="Tools" href="/docs/reference/tools/"></a>

		
	





     </div> 
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
</div> 


  <div id="docsContent">
  

<p>
  <a href="https://github.com/kubernetes/website/edit/master/content/en/docs%5creference%5ccommand-line-tools-reference%5ckubelet-authentication-authorization.md" id="editPageButton" target="_blank">
    Edit This Page
  </a>
</p>

<h1>Kubelet authentication/authorization</h1>





<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#kubelet-authentication">Kubelet authentication</a></li>
<li><a href="#kubelet-authorization">Kubelet authorization</a></li>
</ul></li>
</ul>
</nav>

<h2 id="overview">Overview</h2>

<p>A kubelet&rsquo;s HTTPS endpoint exposes APIs which give access to data of varying sensitivity,
and allow you to perform operations with varying levels of power on the node and within containers.</p>

<p>This document describes how to authenticate and authorize access to the kubelet&rsquo;s HTTPS endpoint.</p>

<h2 id="kubelet-authentication">Kubelet authentication</h2>

<p>By default, requests to the kubelet&rsquo;s HTTPS endpoint that are not rejected by other configured
authentication methods are treated as anonymous requests, and given a username of <code>system:anonymous</code>
and a group of <code>system:unauthenticated</code>.</p>

<p>To disable anonymous access and send <code>401 Unauthorized</code> responses to unauthenticated requests:</p>

<ul>
<li>start the kubelet with the <code>--anonymous-auth=false</code> flag</li>
</ul>

<p>To enable X509 client certificate authentication to the kubelet&rsquo;s HTTPS endpoint:</p>

<ul>
<li>start the kubelet with the <code>--client-ca-file</code> flag, providing a CA bundle to verify client certificates with</li>
<li>start the apiserver with <code>--kubelet-client-certificate</code> and <code>--kubelet-client-key</code> flags</li>
<li>see the <a href="/docs/reference/access-authn-authz/authentication/#x509-client-certs">apiserver authentication documentation</a> for more details</li>
</ul>

<p>To enable API bearer tokens (including service account tokens) to be used to authenticate to the kubelet&rsquo;s HTTPS endpoint:</p>

<ul>
<li>ensure the <code>authentication.k8s.io/v1beta1</code> API group is enabled in the API server</li>
<li>start the kubelet with the <code>--authentication-token-webhook</code> and <code>--kubeconfig</code> flags</li>
<li>the kubelet calls the <code>TokenReview</code> API on the configured API server to determine user information from bearer tokens</li>
</ul>

<h2 id="kubelet-authorization">Kubelet authorization</h2>

<p>Any request that is successfully authenticated (including an anonymous request) is then authorized. The default authorization mode is <code>AlwaysAllow</code>, which allows all requests.</p>

<p>There are many possible reasons to subdivide access to the kubelet API:</p>

<ul>
<li>anonymous auth is enabled, but anonymous users&rsquo; ability to call the kubelet API should be limited</li>
<li>bearer token auth is enabled, but arbitrary API users&rsquo; (like service accounts) ability to call the kubelet API should be limited</li>
<li>client certificate auth is enabled, but only some of the client certificates signed by the configured CA should be allowed to use the kubelet API</li>
</ul>

<p>To subdivide access to the kubelet API, delegate authorization to the API server:</p>

<ul>
<li>ensure the <code>authorization.k8s.io/v1beta1</code> API group is enabled in the API server</li>
<li>start the kubelet with the <code>--authorization-mode=Webhook</code> and the <code>--kubeconfig</code> flags</li>
<li>the kubelet calls the <code>SubjectAccessReview</code> API on the configured API server to determine whether each request is authorized</li>
</ul>

<p>The kubelet authorizes API requests using the same <a href="/docs/reference/access-authn-authz/authorization/#review-your-request-attributes">request attributes</a> approach as the apiserver.</p>

<p>The verb is determined from the incoming request&rsquo;s HTTP verb:</p>

<table>
<thead>
<tr>
<th>HTTP verb</th>
<th>request verb</th>
</tr>
</thead>

<tbody>
<tr>
<td>POST</td>
<td>create</td>
</tr>

<tr>
<td>GET, HEAD</td>
<td>get</td>
</tr>

<tr>
<td>PUT</td>
<td>update</td>
</tr>

<tr>
<td>PATCH</td>
<td>patch</td>
</tr>

<tr>
<td>DELETE</td>
<td>delete</td>
</tr>
</tbody>
</table>

<p>The resource and subresource is determined from the incoming request&rsquo;s path:</p>

<table>
<thead>
<tr>
<th>Kubelet API</th>
<th>resource</th>
<th>subresource</th>
</tr>
</thead>

<tbody>
<tr>
<td>/stats/*</td>
<td>nodes</td>
<td>stats</td>
</tr>

<tr>
<td>/metrics/*</td>
<td>nodes</td>
<td>metrics</td>
</tr>

<tr>
<td>/logs/*</td>
<td>nodes</td>
<td>log</td>
</tr>

<tr>
<td>/spec/*</td>
<td>nodes</td>
<td>spec</td>
</tr>

<tr>
<td><em>all others</em></td>
<td>nodes</td>
<td>proxy</td>
</tr>
</tbody>
</table>

<p>The namespace and API group attributes are always an empty string, and
the resource name is always the name of the kubelet&rsquo;s <code>Node</code> API object.</p>

<p>When running in this mode, ensure the user identified by the <code>--kubelet-client-certificate</code> and <code>--kubelet-client-key</code>
flags passed to the apiserver is authorized for the following attributes:</p>

<ul>
<li>verb=*, resource=nodes, subresource=proxy</li>
<li>verb=*, resource=nodes, subresource=stats</li>
<li>verb=*, resource=nodes, subresource=log</li>
<li>verb=*, resource=nodes, subresource=spec</li>
<li>verb=*, resource=nodes, subresource=metrics</li>
</ul>



<nav class="pagination" style="font-size: 16px; font-weight: bold"><a class="nav nav-prev" href="/docs/reference/command-line-tools-reference/feature-gates/" title="Feature Gates"><i class="fas fa-arrow-left" aria-hidden="true"></i> Prev - Feature Gates</a>
<a class="nav nav-next" style="float:right"  href="/docs/reference/command-line-tools-reference/kubelet-tls-bootstrapping/" title="TLS bootstrapping">Next - TLS bootstrapping <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav>


  
  <h2>Feedback</h2>
  <p class="feedback--prompt">Was this page helpful? </p>
  <button class="button feedback--yes">Yes</button>
  <button class="button feedback--no">No</button>
  <p class="feedback--response feedback--response__hidden">
    Thanks for the feedback. If you have a specific, answerable question about how to use Kubernetes,
    ask it on <a target="_blank" rel="noopener"
    href="https://stackoverflow.com/questions/tagged/kubernetes">Stack Overflow</a>. Open
    an issue in the GitHub repo if you want to <a class="feedback--link" target="_blank" rel="noopener"
    href="https://github.com/kubernetes/website/issues/new?title=Issue%20with%20k8s.io">report a problem</a> or
    <a class="feedback--link" target="_blank" rel="noopener"
    href="https://github.com/kubernetes/website/issues/new?title=Improvement%20for%20k8s.io">suggest an improvement</a>.
  </p>
  <script>
    const yes = document.querySelector('.feedback--yes');
    const no = document.querySelector('.feedback--no');
    document.querySelectorAll('.feedback--link').forEach(link => {
      link.href = link.href + window.location.pathname;
    });
    const sendFeedback = (value) => {
      if (!gtag) { console.log('!gtag'); }
      gtag('event', 'click', {
        'event_category': 'Helpful',
        'event_label': window.location.pathname,
        value
      });
    };
    const disableButtons = () => {
      yes.disabled = true;
      yes.classList.add('feedback--button__disabled');
      no.disabled = true;
      no.classList.add('feedback--button__disabled');
    };
    yes.addEventListener('click', () => {
      sendFeedback(1);
      disableButtons();
      document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');
    });
    no.addEventListener('click', () => {
      sendFeedback(0);
      disableButtons();
      document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');
    });
  </script>


  <div id="pre-footer"> 
  <hr />

  <div class="issue-button-container">
    <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs%5creference%5ccommand-line-tools-reference%5ckubelet-authentication-authorization.md?pixel" alt="Analytics" /></a></p>
    
    
    <script type="text/javascript">
    PDRTJS_settings_8345992 = {
    "id" : "8345992",
    "unique_id" : "\/docs\/reference\/command-line-tools-reference\/kubelet-authentication-authorization\/",
    "title" : "Kubelet authentication\/authorization",
    "permalink" : "https:\/\/qinlj.github.io\/docs\/reference\/command-line-tools-reference\/kubelet-authentication-authorization\/"
    };
    (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
    </script>
    <a href="" onclick="window.open('https://github.com/kubernetes/website/issues/new?title=Issue%20with%20' +
    'k8s.io'+window.location.pathname)" class="button issue">Create an Issue</a>
    
    
    
    <a href="https://github.com/kubernetes/website/edit/master/content/en/docs%5creference%5ccommand-line-tools-reference%5ckubelet-authentication-authorization.md" class="button issue">Edit This Page</a>
    
  </div>
  

  <div id="lastedit" class="lastedit issue-button-container">
    Page last modified on July 18, 2018 at 6:07 PM PST by
    <a href="https://github.com/kubernetes/website/commit/bf109b4dfa294647b553aefaab3a22e929c0db25/">Update authorization links (#9465)</a> (<a href="https://github.com/kubernetes/website/commits/master/content/en/docs%5creference%5ccommand-line-tools-reference%5ckubelet-authentication-authorization.md">Page History</a>)
  </div>
  
</div>

  <div class="post-comment">
    
    


<div id="lv-container" data-id="city" data-uid="MTAyMC80MzQxMi8xOTk1Mw==">
  <script type="text/javascript">
    (function(d, s) {
      var j, e = d.getElementsByTagName(s)[0];

      if (typeof LivereTower === 'function') { return; }

      j = d.createElement(s);
      j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
      j.async = true;

      e.parentNode.insertBefore(j, e);
    })(document, 'script');
  </script>
  <noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
</div>



  </div>
  
  <div class="container" role="main" itemscope itemtype="http://schema.org/Article">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        
        
        
<div>
  <h5 id="tags">Tags: 
  </h5>
</div>
        
        <article role="main" class="blog-post" itemprop="articleBody" id="content">
          ...
          

<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#kubelet-authentication">Kubelet authentication</a></li>
<li><a href="#kubelet-authorization">Kubelet authorization</a></li>
</ul></li>
</ul>
</nav>

<h2 id="overview">Overview</h2>

<p>A kubelet&rsquo;s HTTPS endpoint exposes APIs which give access to data of varying sensitivity,
and allow you to perform operations with varying levels of power on the node and within containers.</p>

<p>This document describes how to authenticate and authorize access to the kubelet&rsquo;s HTTPS endpoint.</p>

<h2 id="kubelet-authentication">Kubelet authentication</h2>

<p>By default, requests to the kubelet&rsquo;s HTTPS endpoint that are not rejected by other configured
authentication methods are treated as anonymous requests, and given a username of <code>system:anonymous</code>
and a group of <code>system:unauthenticated</code>.</p>

<p>To disable anonymous access and send <code>401 Unauthorized</code> responses to unauthenticated requests:</p>

<ul>
<li>start the kubelet with the <code>--anonymous-auth=false</code> flag</li>
</ul>

<p>To enable X509 client certificate authentication to the kubelet&rsquo;s HTTPS endpoint:</p>

<ul>
<li>start the kubelet with the <code>--client-ca-file</code> flag, providing a CA bundle to verify client certificates with</li>
<li>start the apiserver with <code>--kubelet-client-certificate</code> and <code>--kubelet-client-key</code> flags</li>
<li>see the <a href="/docs/reference/access-authn-authz/authentication/#x509-client-certs">apiserver authentication documentation</a> for more details</li>
</ul>

<p>To enable API bearer tokens (including service account tokens) to be used to authenticate to the kubelet&rsquo;s HTTPS endpoint:</p>

<ul>
<li>ensure the <code>authentication.k8s.io/v1beta1</code> API group is enabled in the API server</li>
<li>start the kubelet with the <code>--authentication-token-webhook</code> and <code>--kubeconfig</code> flags</li>
<li>the kubelet calls the <code>TokenReview</code> API on the configured API server to determine user information from bearer tokens</li>
</ul>

<h2 id="kubelet-authorization">Kubelet authorization</h2>

<p>Any request that is successfully authenticated (including an anonymous request) is then authorized. The default authorization mode is <code>AlwaysAllow</code>, which allows all requests.</p>

<p>There are many possible reasons to subdivide access to the kubelet API:</p>

<ul>
<li>anonymous auth is enabled, but anonymous users&rsquo; ability to call the kubelet API should be limited</li>
<li>bearer token auth is enabled, but arbitrary API users&rsquo; (like service accounts) ability to call the kubelet API should be limited</li>
<li>client certificate auth is enabled, but only some of the client certificates signed by the configured CA should be allowed to use the kubelet API</li>
</ul>

<p>To subdivide access to the kubelet API, delegate authorization to the API server:</p>

<ul>
<li>ensure the <code>authorization.k8s.io/v1beta1</code> API group is enabled in the API server</li>
<li>start the kubelet with the <code>--authorization-mode=Webhook</code> and the <code>--kubeconfig</code> flags</li>
<li>the kubelet calls the <code>SubjectAccessReview</code> API on the configured API server to determine whether each request is authorized</li>
</ul>

<p>The kubelet authorizes API requests using the same <a href="/docs/reference/access-authn-authz/authorization/#review-your-request-attributes">request attributes</a> approach as the apiserver.</p>

<p>The verb is determined from the incoming request&rsquo;s HTTP verb:</p>

<table>
<thead>
<tr>
<th>HTTP verb</th>
<th>request verb</th>
</tr>
</thead>

<tbody>
<tr>
<td>POST</td>
<td>create</td>
</tr>

<tr>
<td>GET, HEAD</td>
<td>get</td>
</tr>

<tr>
<td>PUT</td>
<td>update</td>
</tr>

<tr>
<td>PATCH</td>
<td>patch</td>
</tr>

<tr>
<td>DELETE</td>
<td>delete</td>
</tr>
</tbody>
</table>

<p>The resource and subresource is determined from the incoming request&rsquo;s path:</p>

<table>
<thead>
<tr>
<th>Kubelet API</th>
<th>resource</th>
<th>subresource</th>
</tr>
</thead>

<tbody>
<tr>
<td>/stats/*</td>
<td>nodes</td>
<td>stats</td>
</tr>

<tr>
<td>/metrics/*</td>
<td>nodes</td>
<td>metrics</td>
</tr>

<tr>
<td>/logs/*</td>
<td>nodes</td>
<td>log</td>
</tr>

<tr>
<td>/spec/*</td>
<td>nodes</td>
<td>spec</td>
</tr>

<tr>
<td><em>all others</em></td>
<td>nodes</td>
<td>proxy</td>
</tr>
</tbody>
</table>

<p>The namespace and API group attributes are always an empty string, and
the resource name is always the name of the kubelet&rsquo;s <code>Node</code> API object.</p>

<p>When running in this mode, ensure the user identified by the <code>--kubelet-client-certificate</code> and <code>--kubelet-client-key</code>
flags passed to the apiserver is authorized for the following attributes:</p>

<ul>
<li>verb=*, resource=nodes, subresource=proxy</li>
<li>verb=*, resource=nodes, subresource=stats</li>
<li>verb=*, resource=nodes, subresource=log</li>
<li>verb=*, resource=nodes, subresource=spec</li>
<li>verb=*, resource=nodes, subresource=metrics</li>
</ul>

          
          <div class="social-share" data-initialized="true" data-wechat-qrcode-title="不扫别后悔">
  <center>
    <font style="font-size:18px;color:darkcyan;">分享到：</font>
    <a href="#" class="social-share-icon icon-weibo"></a>
    <a href="#" class="social-share-icon icon-wechat"></a>
    <a href="#" class="social-share-icon icon-twitter"></a>
    <a href="#" class="social-share-icon icon-linkedin"></a>
    <a href="#" class="social-share-icon icon-facebook"></a>
    <a href="#" class="social-share-icon icon-qq"></a>
    <a href="#" class="social-share-icon icon-qzone"></a>
  </center>
</div>


<script src="https://hugo-picture.oss-cn-beijing.aliyuncs.com/social-share.min.js"></script>
          
        </article>
      </div>
    </div>
  </div>
</section>

<footer>
    <main class="light-text">
        <nav>
            
            
            
            <a href="/docs/home/">Home</a>
            
            <a href="/blog/">Blog</a>
            
            <a href="/partners/">Partners</a>
            
            <a href="/community/">Community</a>
            
            <a href="/case-studies/">Case Studies</a>
            
        </nav>
        <div class="social">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://discuss.kubernetes.io" class="mailing-list"><span>Forum</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
            <div>
                
                <a href="https://git.k8s.io/community/contributors/guide" class="button">Contribute</a>
            </div>
        </div>
        <div id="miceType" class="center">
            &copy; 2019 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a></a>
        </div>
        <div id="miceType" class="center">
            Copyright &copy; 2019 The Linux Foundation &reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">Trademark Usage page</a>
        </div>
        <div id="miceType" class="center">
            ICP license: 京ICP备17074266号-3
        </div>
    </main>
</footer>

<button class="flyout-button" onclick="kub.toggleToc()"></button>

<script>

(function () {
    window.addEventListener('DOMContentLoaded', init)

        
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
        if (!toc) return
            var container = toc.querySelector('.container')

                
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>



<script language="application/javascript">
  
  (function addHeadingLinks(){
    var article = document.getElementById('docsContent');
    var headings = article.querySelectorAll('h1, h2, h3, h4, h5, h6');
    headings.forEach(function(heading){
      if(heading.id){
        var a = document.createElement('a');
        a.innerHTML = heading.innerHTML;
        a.href = '#'+heading.id;
        a.classList.add('inpage_heading');
        heading.innerHTML = '';
        heading.appendChild(a);
      }
    });
  })();
</script>
</body>
</html>