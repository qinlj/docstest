<!DOCTYPE html>
<html id="docs" lang="en" class="">
<head>
  

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-36037335-10"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-36037335-10');
</script>
<meta charset="utf-8">
<title>kubeadmのトラブルシューティング - Kubernetes</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" type="image/png" href="/images/favicon.png">
<link rel="stylesheet" href="/css/base_fonts.css">
<link rel="stylesheet" href="/css/styles.css">
<link rel="stylesheet" href="/css/jquery-ui.min.css">
<link rel="stylesheet" href="/css/sweetalert.min.css">
<link rel="stylesheet" href="/css/callouts.css">
<link rel="stylesheet" href="/css/custom-jekyll/tags.css">
<link rel="stylesheet" href="https://qinlj.github.io/css/main.css" />
<link rel="stylesheet" href="https://qinlj.github.io/css/share.min.css" />



<meta name="description" content="">
<meta property="og:description" content="">
<meta name="twitter:description" content="">
<meta property="og:url" content="https://qinlj.github.io/ja/docs/setup/independent/troubleshooting-kubeadm/">
<meta property="og:title" content="kubeadmのトラブルシューティング">
<meta name="twitter:title" content="kubeadmのトラブルシューティング">

<meta name="twitter:image:alt"   content="Kubernetes">

<meta property="og:image" content="/images/kubernetes-horizontal-color.png">

<meta property="og:type" content="article">
<script src="/js/anchor-4.1.1.min.js"></script>
<script src="/js/jquery-3.2.1.min.js"></script>
<script src="/js/jquery-ui-1.12.1.min.js"></script>
<script src="/js/bootstrap-3.3.7.min.js"></script>
<script src="/js/sweetalert-1.1.3.min.js"></script>
<script src="/js/script.js"></script>
<script src="/js/custom-jekyll/tags.js"></script>


</head>
<body>
<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/ja/" class="logo"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            
            
            <li><a href="/ja/docs/" class="active">ドキュメント</a></li>
            
            
            
            
            
            
            
            <li><a href="/ja/case-studies/">ケーススタディ</a></li>
            
            
            
             <li>
                <a href="#">
                    日本語 Japanese <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="/docs/setup/independent/troubleshooting-kubeadm/">English</a></li>
                
                    <li><a href="/fr/docs/setup/independent/troubleshooting-kubeadm/">Français</a></li>
                
                </ul>
            </li>

            <li>
                <a href="#">
                    v1.13 <span class="ui-icon ui-icon-carat-1-s"></span>
                </a>
                <ul>
                
                    <li><a href="https://kubernetes.io">v1.13</a></li>
                
                    <li><a href="https://supermaphehh.github.io/zh/">iDesktop .NET</a></li>
                
                    <li><a href="https://v1-12.docs.kubernetes.io">v1.12</a></li>
                
                    <li><a href="https://v1-11.docs.kubernetes.io">v1.11</a></li>
                
                    <li><a href="https://v1-10.docs.kubernetes.io">v1.10</a></li>
                
                    <li><a href="https://v1-9.docs.kubernetes.io">v1.9</a></li>
                
                </ul>
            </li>
        </ul>

        <form id="searchBox" action="/search/">
          <input type="text" id="search" name="q" placeholder="検索" aria-label="Search">
        </form>

    </div>

    <nav id="mainNav">
        <main data-auto-burger="primary">
         
           <div class="nav-box">
            <h3><a href="/ja/docs/tutorials/hello-minikube/">Get Started</a></h3>
           <p>手を動かす準備はできていますか？本チュートリアルでは、Node.jsを使った簡単な"Hello World"を実行するKubernetesクラスタをビルドします。</p>

        </div>
         
           <div class="nav-box">
            <h3><a href="/ja/docs/home/">ドキュメント</a></h3>
           <p>チュートリアル、サンプルやドキュメントのリファレンスを使って Kubernetes の利用方法を学んでください。あなたは<a href="/editdocs/" data-auto-burger-exclude>ドキュメントへコントリビュートをする</a>こともできます!</p>

        </div>
         
        </main>
        <main data-auto-burger="primary">
        <div class="left">
            <h5 class="github-invite">Kubernetesのコードを編集することに興味がありますか？</h5>
            <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>Githubで参照する</a>
        </div>

        <div class="right">
            <h5 class="github-invite">コミュニティを探す</h5>
            <div class="social">
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack Slack</span></a>
                <a href="https://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://discuss.kubernetes.io" class="mailing-list"><span>フォーラム</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>イベントカレンダー</span></a>
            </div>
        </div>
        <div class="clear" style="clear: both"></div>
        </main>
    </nav>
</header>



<section id="hero" class="light-text no-sub">
  







<h1>セットアップ</h1>
<h5></h5>






<div id="vendorStrip" class="light-text">
	<ul>
		
		
		<li><a href="/ja/docs/home/">ホーム</a></li>
		
		
		<li><a href="/ja/docs/setup/" class="YAH">セットアップ</a></li>
		
		
		<li><a href="/ja/docs/concepts/">コンセプト</a></li>
		
		
		<li><a href="/ja/docs/tutorials/">チュートリアル</a></li>
		
	</ul>
	<form id="searchBox" action="/docs/search/">
		<input type="text" id="search" name="q" placeholder="検索" aria-label="Search">
  </form>
</div>

</section>



<section id="encyclopedia">
  
<div id="docsToc">
     <div class="pi-accordion">
    	
        
        
        
        
        
         
             
                 
             
         
             
                 
                          
                          
                 
             
         
             
         
             
         
         
        
        <a class="item" data-title="セットアップ" href="/ja/docs/setup/"></a>

	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="正しいソリューションの選択" href="/ja/docs/setup/pick-right-solution/"></a>

		
	
		
			
<div class="item" data-title="Kubernetesのダウンロード">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" target="_blank" data-title="v1.13 Release Notes <small>(EN)</small>" href="/docs/setup/release/notes/"></a>

		
	
		
			

<a class="item" data-title="ソースからのビルド" href="/ja/docs/setup/release/building-from-source/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="kubeadmによるClusterのブートストラッピング">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="kubeadmのインストール" href="/ja/docs/setup/independent/install-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使用したシングルマスタークラスターの作成" href="/ja/docs/setup/independent/create-cluster-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使ったコントロールプレーンの設定のカスタマイズ" href="/ja/docs/setup/independent/control-plane-flags/"></a>

		
	
		
			

<a class="item" data-title="Options for Highly Available Topology" href="/ja/docs/setup/independent/ha-topology/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使用した高可用性クラスターの作成" href="/ja/docs/setup/independent/high-availability/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使用した高可用性etcdクラスターの作成" href="/ja/docs/setup/independent/setup-ha-etcd-with-kubeadm/"></a>

		
	
		
			

<a class="item" data-title="kubeadmを使用したクラスター内の各kubeletの設定" href="/ja/docs/setup/independent/kubelet-integration/"></a>

		
	
		
			

<a class="item" data-title="kubeadmのトラブルシューティング" href="/ja/docs/setup/independent/troubleshooting-kubeadm/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="すぐに利用できるクラウドソリューション">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="AWS EC2上でKubernetesを動かす" href="/ja/docs/setup/turnkey/aws/"></a>

		
	
		
			

<a class="item" data-title="Alibaba CloudでKubernetesを動かす" href="/ja/docs/setup/turnkey/alibaba-cloud/"></a>

		
	
		
			

<a class="item" data-title="Azure 上で Kubernetes を動かす" href="/ja/docs/setup/turnkey/azure/"></a>

		
	
		
			

<a class="item" data-title="CenturyLink Cloud上でKubernetesを動かす" href="/ja/docs/setup/turnkey/clc/"></a>

		
	
		
			

<a class="item" data-title="Google Compute Engine上でKubernetesを動かす" href="/ja/docs/setup/turnkey/gce/"></a>

		
	
		
			

<a class="item" target="_blank" data-title="Running Kubernetes on Multiple Clouds with IBM Cloud Private <small>(EN)</small>" href="/docs/setup/turnkey/icp/"></a>

		
	
		
			

<a class="item" data-title="Stackpoint.ioを利用して複数のクラウド上でKubernetesを動かす" href="/ja/docs/setup/turnkey/stackpoint/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="カスタムクラウドソリューション">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="AWSまたはGCE上のCoreOS" href="/ja/docs/setup/custom-cloud/coreos/"></a>

		
	
		
			

<a class="item" data-title="kopsを使ったAWS上でのKubernetesのインストール" href="/ja/docs/setup/custom-cloud/kops/"></a>

		
	
		
			

<a class="item" data-title="kubesprayを使ったオンプレミス/クラウドプロバイダへのKubernetesのインストール" href="/ja/docs/setup/custom-cloud/kubespray/"></a>

		
	

	</div>
</div>

		
	
		
			
<div class="item" data-title="オンプレミスVM">
	<div class="container">
		
		
	
	
			
			
			
			
			
		
	
	
	
		
			

<a class="item" data-title="Cloudstack" href="/ja/docs/setup/on-premises-vm/cloudstack/"></a>

		
	
		
			

<a class="item" data-title="DC/OS上のKubernetes" href="/ja/docs/setup/on-premises-vm/dcos/"></a>

		
	
		
			

<a class="item" data-title="oVirt" href="/ja/docs/setup/on-premises-vm/ovirt/"></a>

		
	

	</div>
</div>

		
	
		
			

<a class="item" target="_blank" data-title="Kubernetes Version and Version Skew Support Policy <small>(EN)</small>" href="/docs/setup/version-skew-policy/"></a>

		
	
		
			

<a class="item" data-title="大規模クラスタの構築" href="/ja/docs/setup/cluster-large/"></a>

		
	
		
			

<a class="item" data-title="複数のゾーンで動かす" href="/ja/docs/setup/multiple-zones/"></a>

		
	
		
			

<a class="item" data-title="CRIのインストール" href="/ja/docs/setup/cri/"></a>

		
	
		
			

<a class="item" data-title="KRIBを使用してDigital Rebar Provision (DRP)と共にKubernetesをインストールする" href="/ja/docs/setup/on-premises-metal/krib/"></a>

		
	
		
			

<a class="item" data-title="Minikubを使用してローカル環境でKubernetesを動かす" href="/ja/docs/setup/minikube/"></a>

		
	
		
			

<a class="item" data-title="PKI証明書とその要件" href="/ja/docs/setup/certificates/"></a>

		
	
		
			

<a class="item" data-title="ゼロからのカスタムクラスターの作成" href="/ja/docs/setup/scratch/"></a>

		
	
		
			

<a class="item" data-title="ノードのセットアップの検証" href="/ja/docs/setup/node-conformance/"></a>

		
	





     </div> 
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
</div> 


  <div id="docsContent">
  

<p>
  <a href="https://github.com/kubernetes/website/edit/master/content/ja/docs%5csetup%5cindependent%5ctroubleshooting-kubeadm.md" id="editPageButton" target="_blank">
    Edit This Page
  </a>
</p>

<h1>kubeadmのトラブルシューティング</h1>



<p>As with any program, you might run into an error installing or running kubeadm.
This page lists some common failure scenarios and have provided steps that can help you understand and fix the problem.</p>

<p>If your problem is not listed below, please follow the following steps:</p>

<ul>
<li><p>If you think your problem is a bug with kubeadm:</p>

<ul>
<li>Go to <a href="https://github.com/kubernetes/kubeadm/issues" target="_blank">github.com/kubernetes/kubeadm</a> and search for existing issues.</li>
<li>If no issue exists, please <a href="https://github.com/kubernetes/kubeadm/issues/new" target="_blank">open one</a> and follow the issue template.</li>
</ul></li>

<li><p>If you are unsure about how kubeadm works, you can ask on <a href="http://slack.k8s.io/" target="_blank">Slack</a> in #kubeadm, or open a question on <a href="https://stackoverflow.com/questions/tagged/kubernetes" target="_blank">StackOverflow</a>. Please include
relevant tags like <code>#kubernetes</code> and <code>#kubeadm</code> so folks can help you.</p></li>
</ul>









<ul id="markdown-toc">










<li><a href="#%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab%e4%b8%ad%e3%81%ab-ebtables-%e3%82%82%e3%81%97%e3%81%8f%e3%81%af%e4%bb%96%e3%81%ae%e4%bc%bc%e3%81%9f%e3%82%88%e3%81%86%e3%81%aa%e5%ae%9f%e8%a1%8c%e3%83%97%e3%83%ad%e3%82%b0%e3%83%a9%e3%83%a0%e3%81%8c%e8%a6%8b%e3%81%a4%e3%81%8b%e3%82%89%e3%81%aa%e3%81%84">インストール中に<code>ebtables</code>もしくは他の似たような実行プログラムが見つからない</a></li>




<li><a href="#%e3%82%a4%e3%83%b3%e3%82%b9%e3%83%88%e3%83%bc%e3%83%ab%e4%b8%ad%e3%81%abkubeadm%e3%81%8c%e3%82%b3%e3%83%b3%e3%83%88%e3%83%ad%e3%83%bc%e3%83%ab%e3%83%97%e3%83%ac%e3%83%bc%e3%83%b3%e3%82%92%e5%be%85%e3%81%a1%e7%b6%9a%e3%81%91%e3%81%a6%e6%ad%a2%e3%81%be%e3%82%8b">インストール中にkubeadmがコントロールプレーンを待ち続けて止まる</a></li>




<li><a href="#%e7%ae%a1%e7%90%86%e3%82%b3%e3%83%b3%e3%83%86%e3%83%8a%e3%82%92%e5%89%8a%e9%99%a4%e3%81%99%e3%82%8b%e6%99%82%e3%81%abkubeadm%e3%81%8c%e6%ad%a2%e3%81%be%e3%82%8b">管理コンテナを削除する時にkubeadmが止まる</a></li>




<li><a href="#pod%e3%81%ae%e7%8a%b6%e6%85%8b%e3%81%8c-runcontainererror-crashloopbackoff-%e3%81%be%e3%81%9f%e3%81%af-error">Podの状態が<code>RunContainerError</code>、<code>CrashLoopBackOff</code>、または<code>Error</code></a></li>




<li><a href="#coredns-%e3%82%82%e3%81%97%e3%81%8f%e3%81%af-kube-dns-%e3%81%8c-pending-%e7%8a%b6%e6%85%8b%e3%81%a7%e3%82%b9%e3%82%bf%e3%83%83%e3%82%af%e3%81%99%e3%82%8b"><code>coredns</code>(もしくは<code>kube-dns</code>)が<code>Pending</code>状態でスタックする</a></li>




<li><a href="#hostport-%e3%82%b5%e3%83%bc%e3%83%93%e3%82%b9%e3%81%8c%e5%8b%95%e3%81%8b%e3%81%aa%e3%81%84"><code>HostPort</code>サービスが動かない</a></li>




<li><a href="#%e3%82%b5%e3%83%bc%e3%83%93%e3%82%b9ip%e7%b5%8c%e7%94%b1%e3%81%a7pod%e3%81%ab%e3%82%a2%e3%82%af%e3%82%bb%e3%82%b9%e3%81%99%e3%82%8b%e3%81%93%e3%81%a8%e3%81%8c%e3%81%a7%e3%81%8d%e3%81%aa%e3%81%84">サービスIP経由でPodにアクセスすることができない</a></li>




<li><a href="#tls%e8%a8%bc%e6%98%8e%e6%9b%b8%e3%81%ae%e3%82%a8%e3%83%a9%e3%83%bc">TLS証明書のエラー</a></li>




<li><a href="#vagrant%e5%86%85%e3%81%a7pod%e3%83%8d%e3%83%83%e3%83%88%e3%83%af%e3%83%bc%e3%82%af%e3%81%a8%e3%81%97%e3%81%a6flannel%e3%82%92%e4%bd%bf%e7%94%a8%e3%81%99%e3%82%8b%e6%99%82%e3%81%ae%e3%83%87%e3%83%95%e3%82%a9%e3%83%ab%e3%83%88nic">Vagrant内でPodネットワークとしてflannelを使用する時のデフォルトNIC</a></li>




<li><a href="#%e5%85%ac%e9%96%8b%e3%81%95%e3%82%8c%e3%81%a6%e3%81%84%e3%81%aa%e3%81%84ip%e3%81%8c%e3%82%b3%e3%83%b3%e3%83%86%e3%83%8a%e3%81%ab%e4%bd%bf%e3%82%8f%e3%82%8c%e3%81%a6%e3%81%84%e3%82%8b">公開されていないIPがコンテナに使われている</a></li>




<li><a href="#coredns-%e3%81%aepod%e3%81%8c-crashloopbackoff-%e3%82%82%e3%81%97%e3%81%8f%e3%81%af-error-%e7%8a%b6%e6%85%8b%e3%81%ab%e3%81%aa%e3%82%8b"><code>coredns</code>のPodが<code>CrashLoopBackOff</code>もしくは<code>Error</code>状態になる</a></li>



















</ul>


<h2 id="インストール中に-ebtables-もしくは他の似たような実行プログラムが見つからない">インストール中に<code>ebtables</code>もしくは他の似たような実行プログラムが見つからない</h2>

<p>If you see the following warnings while running <code>kubeadm init</code></p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#666">[</span>preflight<span style="color:#666">]</span> WARNING: ebtables not found in system path
<span style="color:#666">[</span>preflight<span style="color:#666">]</span> WARNING: ethtool not found in system path</code></pre></div>
<p>Then you may be missing <code>ebtables</code>, <code>ethtool</code> or a similar executable on your node. You can install them with the following commands:</p>

<ul>
<li>For Ubuntu/Debian users, run <code>apt install ebtables ethtool</code>.</li>
<li>For CentOS/Fedora users, run <code>yum install ebtables ethtool</code>.</li>
</ul>

<h2 id="インストール中にkubeadmがコントロールプレーンを待ち続けて止まる">インストール中にkubeadmがコントロールプレーンを待ち続けて止まる</h2>

<p>If you notice that <code>kubeadm init</code> hangs after printing out the following line:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#666">[</span>apiclient<span style="color:#666">]</span> Created API client, waiting <span style="color:#a2f;font-weight:bold">for</span> the control plane to become ready</code></pre></div>
<p>This may be caused by a number of problems. The most common are:</p>

<ul>
<li>network connection problems. Check that your machine has full network connectivity before continuing.</li>
<li>the default cgroup driver configuration for the kubelet differs from that used by Docker.
Check the system log file (e.g. <code>/var/log/message</code>) or examine the output from <code>journalctl -u kubelet</code>. If you see something like the following:</li>
</ul>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">  error: failed to run Kubelet: failed to create kubelet:
  misconfiguration: kubelet cgroup driver: <span style="color:#b44">&#34;systemd&#34;</span> is different from docker cgroup driver: <span style="color:#b44">&#34;cgroupfs&#34;</span></code></pre></div>
<p>There are two common ways to fix the cgroup driver problem:</p>

<ol>
<li>Install Docker again following instructions
<a href="/docs/setup/independent/install-kubeadm/#installing-docker">here</a>.</li>
<li>Change the kubelet config to match the Docker cgroup driver manually, you can refer to
<a href="/docs/setup/independent/install-kubeadm/#configure-cgroup-driver-used-by-kubelet-on-master-node">Configure cgroup driver used by kubelet on Master Node</a>
for detailed instructions.</li>
</ol>

<ul>
<li>control plane Docker containers are crashlooping or hanging. You can check this by running <code>docker ps</code> and investigating each container by running <code>docker logs</code>.</li>
</ul>

<h2 id="管理コンテナを削除する時にkubeadmが止まる">管理コンテナを削除する時にkubeadmが止まる</h2>

<p>The following could happen if Docker halts and does not remove any Kubernetes-managed containers:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo kubeadm reset
<span style="color:#666">[</span>preflight<span style="color:#666">]</span> Running pre-flight checks
<span style="color:#666">[</span>reset<span style="color:#666">]</span> Stopping the kubelet service
<span style="color:#666">[</span>reset<span style="color:#666">]</span> Unmounting mounted directories in <span style="color:#b44">&#34;/var/lib/kubelet&#34;</span>
<span style="color:#666">[</span>reset<span style="color:#666">]</span> Removing kubernetes-managed containers
<span style="color:#666">(</span>block<span style="color:#666">)</span></code></pre></div>
<p>A possible solution is to restart the Docker service and then re-run <code>kubeadm reset</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo systemctl restart docker.service
sudo kubeadm reset</code></pre></div>
<p>Inspecting the logs for docker may also be useful:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">journalctl -ul docker</code></pre></div>
<h2 id="podの状態が-runcontainererror-crashloopbackoff-または-error">Podの状態が<code>RunContainerError</code>、<code>CrashLoopBackOff</code>、または<code>Error</code></h2>

<p>Right after <code>kubeadm init</code> there should not be any pods in these states.</p>

<ul>
<li>If there are pods in one of these states <em>right after</em> <code>kubeadm init</code>, please open an
issue in the kubeadm repo. <code>coredns</code> (or <code>kube-dns</code>) should be in the <code>Pending</code> state
until you have deployed the network solution.</li>
<li>If you see Pods in the <code>RunContainerError</code>, <code>CrashLoopBackOff</code> or <code>Error</code> state
after deploying the network solution and nothing happens to <code>coredns</code> (or <code>kube-dns</code>),
it&rsquo;s very likely that the Pod Network solution and nothing happens to the DNS server, it&rsquo;s very
likely that the Pod Network solution that you installed is somehow broken. You
might have to grant it more RBAC privileges or use a newer version. Please file
an issue in the Pod Network providers&rsquo; issue tracker and get the issue triaged there.</li>
<li>If you install a version of Docker older than 1.12.1, remove the <code>MountFlags=slave</code> option
when booting <code>dockerd</code> with <code>systemd</code> and restart <code>docker</code>. You can see the MountFlags in <code>/usr/lib/systemd/system/docker.service</code>.
MountFlags can interfere with volumes mounted by Kubernetes, and put the Pods in <code>CrashLoopBackOff</code> state.
The error happens when Kubernetes does not find <code>var/run/secrets/kubernetes.io/serviceaccount</code> files.</li>
</ul>

<h2 id="coredns-もしくは-kube-dns-が-pending-状態でスタックする"><code>coredns</code>(もしくは<code>kube-dns</code>)が<code>Pending</code>状態でスタックする</h2>

<p>This is <strong>expected</strong> and part of the design. kubeadm is network provider-agnostic, so the admin
should <a href="/docs/concepts/cluster-administration/addons/">install the pod network solution</a>
of choice. You have to install a Pod Network
before CoreDNS may deployed fully. Hence the <code>Pending</code> state before the network is set up.</p>

<h2 id="hostport-サービスが動かない"><code>HostPort</code>サービスが動かない</h2>

<p>The <code>HostPort</code> and <code>HostIP</code> functionality is available depending on your Pod Network
provider. Please contact the author of the Pod Network solution to find out whether
<code>HostPort</code> and <code>HostIP</code> functionality are available.</p>

<p>Calico, Canal, and Flannel CNI providers are verified to support HostPort.</p>

<p>For more information, see the <a href="https://github.com/containernetworking/plugins/blob/master/plugins/meta/portmap/README.md" target="_blank">CNI portmap documentation</a>.</p>

<p>If your network provider does not support the portmap CNI plugin, you may need to use the <a href="/docs/concepts/services-networking/service/#nodeport">NodePort feature of
services</a> or use <code>HostNetwork=true</code>.</p>

<h2 id="サービスip経由でpodにアクセスすることができない">サービスIP経由でPodにアクセスすることができない</h2>

<ul>
<li><p>Many network add-ons do not yet enable <a href="https://kubernetes.io/docs/tasks/debug-application-cluster/debug-service/#a-pod-cannot-reach-itself-via-service-ip" target="_blank">hairpin mode</a>
which allows pods to access themselves via their Service IP. This is an issue related to
<a href="https://github.com/containernetworking/cni/issues/476" target="_blank">CNI</a>. Please contact the network
add-on provider to get the latest status of their support for hairpin mode.</p></li>

<li><p>If you are using VirtualBox (directly or via Vagrant), you will need to
ensure that <code>hostname -i</code> returns a routable IP address. By default the first
interface is connected to a non-routable host-only network. A work around
is to modify <code>/etc/hosts</code>, see this <a href="https://github.com/errordeveloper/k8s-playground/blob/22dd39dfc06111235620e6c4404a96ae146f26fd/Vagrantfile#L11" target="_blank">Vagrantfile</a>
for an example.</p></li>
</ul>

<h2 id="tls証明書のエラー">TLS証明書のエラー</h2>

<p>The following error indicates a possible certificate mismatch.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-none" data-lang="none"># kubectl get pods
Unable to connect to the server: x509: certificate signed by unknown authority (possibly because of &#34;crypto/rsa: verification error&#34; while trying to verify candidate authority certificate &#34;kubernetes&#34;)</code></pre></div>
<ul>
<li>Verify that the <code>$HOME/.kube/config</code> file contains a valid certificate, and
regenerate a certificate if necessary. The certificates in a kubeconfig file
are base64 encoded. The <code>base64 -d</code> command can be used to decode the certificate
and <code>openssl x509 -text -noout</code> can be used for viewing the certificate information.</li>
<li>Another workaround is to overwrite the existing <code>kubeconfig</code> for the &ldquo;admin&rdquo; user:</li>
</ul>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  mv  <span style="color:#b8860b">$HOME</span>/.kube <span style="color:#b8860b">$HOME</span>/.kube.bak
  sudo cp -i /etc/kubernetes/admin.conf <span style="color:#b8860b">$HOME</span>/.kube/config
  sudo chown <span style="color:#a2f;font-weight:bold">$(</span>id -u<span style="color:#a2f;font-weight:bold">)</span>:<span style="color:#a2f;font-weight:bold">$(</span>id -g<span style="color:#a2f;font-weight:bold">)</span> <span style="color:#b8860b">$HOME</span>/.kube/config</code></pre></div>
<h2 id="vagrant内でpodネットワークとしてflannelを使用する時のデフォルトnic">Vagrant内でPodネットワークとしてflannelを使用する時のデフォルトNIC</h2>

<p>The following error might indicate that something was wrong in the pod network:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">Error from server <span style="color:#666">(</span>NotFound<span style="color:#666">)</span>: the server could not find the requested resource</code></pre></div>
<ul>
<li>If you&rsquo;re using flannel as the pod network inside Vagrant, then you will have to specify the default interface name for flannel.</li>
</ul>

<p>Vagrant typically assigns two interfaces to all VMs. The first, for which all hosts are assigned the IP address <code>10.0.2.15</code>, is for external traffic that gets NATed.</p>

<p>This may lead to problems with flannel, which defaults to the first interface on a host. This leads to all hosts thinking they have the same public IP address. To prevent this, pass the <code>--iface eth1</code> flag to flannel so that the second interface is chosen.</p>

<h2 id="公開されていないipがコンテナに使われている">公開されていないIPがコンテナに使われている</h2>

<p>In some situations <code>kubectl logs</code> and <code>kubectl run</code> commands may return with the following errors in an otherwise functional cluster:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">Error from server: Get https://10.19.0.41:10250/containerLogs/default/mysql-ddc65b868-glc5m/mysql: dial tcp <span style="color:#666">10</span>.19.0.41:10250: getsockopt: no route to host</code></pre></div>
<ul>
<li>This may be due to Kubernetes using an IP that can not communicate with other IPs on the seemingly same subnet, possibly by policy of the machine provider.</li>
<li>Digital Ocean assigns a public IP to <code>eth0</code> as well as a private one to be used internally as anchor for their floating IP feature, yet <code>kubelet</code> will pick the latter as the node&rsquo;s <code>InternalIP</code> instead of the public one.</li>
</ul>

<p>Use <code>ip addr show</code> to check for this scenario instead of <code>ifconfig</code> because <code>ifconfig</code> will not display the offending alias IP address. Alternatively an API endpoint specific to Digital Ocean allows to query for the anchor IP from the droplet:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  curl http://169.254.169.254/metadata/v1/interfaces/public/0/anchor_ipv4/address</code></pre></div>
<p>The workaround is to tell <code>kubelet</code> which IP to use using <code>--node-ip</code>. When using Digital Ocean, it can be the public one (assigned to <code>eth0</code>) or the private one (assigned to <code>eth1</code>) should you want to use the optional private network. The <a href="https://github.com/kubernetes/kubernetes/blob/release-1.13/cmd/kubeadm/app/apis/kubeadm/v1beta1/types.go" target="_blank"><code>KubeletExtraArgs</code> section of the kubeadm <code>NodeRegistrationOptions</code> structure</a> can be used for this.</p>

<p>Then restart <code>kubelet</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  systemctl daemon-reload
  systemctl restart kubelet</code></pre></div>
<h2 id="coredns-のpodが-crashloopbackoff-もしくは-error-状態になる"><code>coredns</code>のPodが<code>CrashLoopBackOff</code>もしくは<code>Error</code>状態になる</h2>

<p>If you have nodes that are running SELinux with an older version of Docker you might experience a scenario
where the <code>coredns</code> pods are not starting. To solve that you can try one of the following options:</p>

<ul>
<li>Upgrade to a <a href="/docs/setup/independent/install-kubeadm/#installing-docker">newer version of Docker</a>.</li>
<li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/security-enhanced_linux/sect-security-enhanced_linux-enabling_and_disabling_selinux-disabling_selinux" target="_blank">Disable SELinux</a>.</li>
<li>Modify the <code>coredns</code> deployment to set <code>allowPrivilegeEscalation</code> to <code>true</code>:</li>
</ul>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl -n kube-system get deployment coredns -o yaml | <span style="color:#b62;font-weight:bold">\
</span><span style="color:#b62;font-weight:bold"></span>  sed <span style="color:#b44">&#39;s/allowPrivilegeEscalation: false/allowPrivilegeEscalation: true/g&#39;</span> | <span style="color:#b62;font-weight:bold">\
</span><span style="color:#b62;font-weight:bold"></span>  kubectl apply -f -</code></pre></div>
<p>Another cause for CoreDNS to have <code>CrashLoopBackOff</code> is when a CoreDNS Pod deployed in Kubernetes detects a loop. <a href="https://github.com/coredns/coredns/tree/master/plugin/loop#troubleshooting-loops-in-kubernetes-clusters" target="_blank">A number of workarounds</a>
are available to avoid Kubernetes trying to restart the CoreDNS Pod every time CoreDNS detects the loop and exits.</p>

<blockquote class="warning">
  <div><strong>Warning:</strong> Disabling SELinux or setting <code>allowPrivilegeEscalation</code> to <code>true</code> can compromise
the security of your cluster.</div>
</blockquote>














<nav class="pagination" style="font-size: 16px; font-weight: bold"><a class="nav nav-prev" href="/ja/docs/setup/independent/kubelet-integration/" title="kubeadmを使用したクラスター内の各kubeletの設定"><i class="fas fa-arrow-left" aria-hidden="true"></i> Prev - kubeadmを使用したクラスター内の各kubeletの設定</a>
<a class="nav nav-next" style="float:right"  href="/ja/docs/setup/turnkey/" title="すぐに利用できるクラウドソリューション">Next - すぐに利用できるクラウドソリューション <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav>


  
  <h2>Feedback</h2>
  <p class="feedback--prompt">Was this page helpful? </p>
  <button class="button feedback--yes">Yes</button>
  <button class="button feedback--no">No</button>
  <p class="feedback--response feedback--response__hidden">
    Thanks for the feedback. If you have a specific, answerable question about how to use Kubernetes,
    ask it on <a target="_blank" rel="noopener"
    href="https://stackoverflow.com/questions/tagged/kubernetes">Stack Overflow</a>. Open
    an issue in the GitHub repo if you want to <a class="feedback--link" target="_blank" rel="noopener"
    href="https://github.com/kubernetes/website/issues/new?title=Issue%20with%20k8s.io">report a problem</a> or
    <a class="feedback--link" target="_blank" rel="noopener"
    href="https://github.com/kubernetes/website/issues/new?title=Improvement%20for%20k8s.io">suggest an improvement</a>.
  </p>
  <script>
    const yes = document.querySelector('.feedback--yes');
    const no = document.querySelector('.feedback--no');
    document.querySelectorAll('.feedback--link').forEach(link => {
      link.href = link.href + window.location.pathname;
    });
    const sendFeedback = (value) => {
      if (!gtag) { console.log('!gtag'); }
      gtag('event', 'click', {
        'event_category': 'Helpful',
        'event_label': window.location.pathname,
        value
      });
    };
    const disableButtons = () => {
      yes.disabled = true;
      yes.classList.add('feedback--button__disabled');
      no.disabled = true;
      no.classList.add('feedback--button__disabled');
    };
    yes.addEventListener('click', () => {
      sendFeedback(1);
      disableButtons();
      document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');
    });
    no.addEventListener('click', () => {
      sendFeedback(0);
      disableButtons();
      document.querySelector('.feedback--response').classList.remove('feedback--response__hidden');
    });
  </script>


  <div id="pre-footer"> 
  <hr />

  <div class="issue-button-container">
    <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs%5csetup%5cindependent%5ctroubleshooting-kubeadm.md?pixel" alt="Analytics" /></a></p>
    
    
    <script type="text/javascript">
    PDRTJS_settings_8345992 = {
    "id" : "8345992",
    "unique_id" : "\/ja\/docs\/setup\/independent\/troubleshooting-kubeadm\/",
    "title" : "kubeadmのトラブルシューティング",
    "permalink" : "https:\/\/qinlj.github.io\/ja\/docs\/setup\/independent\/troubleshooting-kubeadm\/"
    };
    (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
    </script>
    <a href="" onclick="window.open('https://github.com/kubernetes/website/issues/new?title=Issue%20with%20' +
    'k8s.io'+window.location.pathname)" class="button issue">Issue作成</a>
    
    
    
    <a href="https://github.com/kubernetes/website/edit/master/content/ja/docs%5csetup%5cindependent%5ctroubleshooting-kubeadm.md" class="button issue">ページ編集</a>
    
  </div>
  

  <div id="lastedit" class="lastedit issue-button-container">
    ページの最終更新 March 08, 2019 at 3:17 AM PST by
    <a href="https://github.com/kubernetes/website/commit/edb233cac2f4f910dd55311a3c63bdfbd53a081b/">First Japanese l10n work for release-1.13 (#12998)</a> (<a href="https://github.com/kubernetes/website/commits/master/content/en/docs%5csetup%5cindependent%5ctroubleshooting-kubeadm.md">ページ履歴</a>)
  </div>
  
</div>

  <div class="post-comment">
    
    


<div id="lv-container" data-id="city" data-uid="MTAyMC80MzQxMi8xOTk1Mw==">
  <script type="text/javascript">
    (function(d, s) {
      var j, e = d.getElementsByTagName(s)[0];

      if (typeof LivereTower === 'function') { return; }

      j = d.createElement(s);
      j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
      j.async = true;

      e.parentNode.insertBefore(j, e);
    })(document, 'script');
  </script>
  <noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
</div>



  </div>
  
  <div class="container" role="main" itemscope itemtype="http://schema.org/Article">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        
        
        
<div>
  <h5 id="tags">Tags: 
  </h5>
</div>
        
        <article role="main" class="blog-post" itemprop="articleBody" id="content">
          ...
          



          
          <div class="social-share" data-initialized="true" data-wechat-qrcode-title="不扫别后悔">
  <center>
    <font style="font-size:18px;color:darkcyan;">分享到：</font>
    <a href="#" class="social-share-icon icon-weibo"></a>
    <a href="#" class="social-share-icon icon-wechat"></a>
    <a href="#" class="social-share-icon icon-twitter"></a>
    <a href="#" class="social-share-icon icon-linkedin"></a>
    <a href="#" class="social-share-icon icon-facebook"></a>
    <a href="#" class="social-share-icon icon-qq"></a>
    <a href="#" class="social-share-icon icon-qzone"></a>
  </center>
</div>


<script src="https://hugo-picture.oss-cn-beijing.aliyuncs.com/social-share.min.js"></script>
          
        </article>
      </div>
    </div>
  </div>
</section>

<footer>
    <main class="light-text">
        <nav>
            
            
            
            <a href="/ja/docs/home/">ホーム</a>
            
            
            
            
            
            
            
            <a href="/ja/case-studies/">ケーススタディ</a>
            
        </nav>
        <div class="social">
            <div>
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>GitHub</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
            </div>
            <div>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://discuss.kubernetes.io" class="mailing-list"><span>フォーラム</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>イベントカレンダー</span></a>
            </div>
            <div>
                
                <a href="https://git.k8s.io/community/contributors/guide" class="button">コントリビュート</a>
            </div>
        </div>
        <div id="miceType" class="center">
            &copy; 2019 The Kubernetes Authors | Documentation Distributed under <a href="https://git.k8s.io/website/LICENSE" class="light-text">CC BY 4.0</a></a>
        </div>
        <div id="miceType" class="center">
            Copyright &copy; 2019 The Linux Foundation &reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">Trademark Usage page</a>
        </div>
        <div id="miceType" class="center">
            ICP license: 京ICP备17074266号-3
        </div>
    </main>
</footer>

<button class="flyout-button" onclick="kub.toggleToc()"></button>

<script>

(function () {
    window.addEventListener('DOMContentLoaded', init)

        
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
        if (!toc) return
            var container = toc.querySelector('.container')

                
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>



<script language="application/javascript">
  
  (function addHeadingLinks(){
    var article = document.getElementById('docsContent');
    var headings = article.querySelectorAll('h1, h2, h3, h4, h5, h6');
    headings.forEach(function(heading){
      if(heading.id){
        var a = document.createElement('a');
        a.innerHTML = heading.innerHTML;
        a.href = '#'+heading.id;
        a.classList.add('inpage_heading');
        heading.innerHTML = '';
        heading.appendChild(a);
      }
    });
  })();
</script>
</body>
</html>